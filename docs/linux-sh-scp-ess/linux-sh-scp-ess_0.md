# 前言

GNU/Linux 系统上的 shell 可以说是任何用户最强大的工具。一般来说，shell 充当系统用户和操作系统内核之间的接口。我们使用 shell 来运行命令以执行任务，并经常将输出保存到文件中。虽然这些简单的用例可以通过在 shell 上使用一些命令轻松实现，但有时手头的任务可能比这更复杂。

进入 shell 脚本编写，这是一种神奇的工具，它允许您向 shell 编写逐步说明，告诉它如何执行复杂的任务。然而，除非您知道可以使用的命令，否则仅仅学习编写脚本的语法是不够的。只有这样，脚本才能被重复使用，高效且易于使用。当一个人掌握了 GNU/Linux 系统上可用的命令后，接下来就是疯狂地自动化日常任务——无论是查找文档还是清理早已观看过的旧电影。无论您是其他脚本语言的专家，还是第一次尝试，本书都将向您展示如何使用 shell 脚本做魔术！

# 本书涵盖的内容

第一章, *脚本编写之旅的开始*，告诉您编写 shell 脚本的重要性，以及一个简单的 Hello World shell 脚本程序。它还涵盖了定义变量，内置变量和运算符等基本和必要的 shell 脚本主题。它还包含了有关 shell 扩展的详细解释，这些扩展发生在字符（如~，*，？，[]和{}）中。

第二章, *I/O，重定向管道和过滤器的实践*，讨论了命令和 shell 脚本的标准输入，输出和错误流。它还介绍了如何将它们重定向到其他流的方法。还涵盖了正则表达式等最强大的概念。它为`grep`，`sed`，`uniq`和`tail`等命令提供了过滤输入数据中有用数据的指导。

第三章, *有效的脚本编写*，提供了关于构建 shell 脚本以组织任务的见解。在讨论脚本退出代码之后，它讨论了基本的编程结构，如条件和循环。然后讨论了代码组织成函数和别名的方法。最后，它详细介绍了`xargs`，`pushd`和`popd`的工作原理。

第四章, *模块化和调试*，讨论了通过使用可以被引用的通用代码使 shell 脚本模块化。它还涵盖了脚本的命令行参数的详细信息，以及当脚本出现故障时如何调试。本章还包含了用户如何实现自定义命令完成的信息。

第五章, *自定义环境*，继续讨论 shell 环境-它包含的内容，其重要性，以及最终如何修改它。它还带领读者了解 bash 在启动时使用的不同初始化文件。最后，我们讨论了如何检查命令历史记录和管理运行任务。

第六章, *文件操作*，讨论了文件，这是任何 UNIX 系统的主要组成部分。它涵盖了“一切皆为文件”的基本理念，并带领读者了解基本文件操作，比较文件，查找文件和创建链接。本章还解释了特殊文件和临时文件的概念，以及文件权限的详细信息。

第七章，“欢迎来到进程”，讨论了活跃的可执行文件，以及它们如何成为进程。从列出和监视运行中的进程，它继续讨论如何利用进程替换。接下来，它涵盖了进程调度优先级、信号、陷阱，以及进程如何相互通信。

第八章，“调度任务和嵌入脚本语言”，讨论了通过使用系统 Cron 在适当的时间安排任务。接下来，它涵盖了负责在大多数现代 Linux 系统中编排启动任务的系统。最后，本章包含了如何将其他脚本语言的脚本嵌入到 shell 脚本中的说明。

# 您需要为本书准备什么

读者不需要任何先前的知识来理解本书，尽管对 Linux 有一些熟悉会有所帮助。在软件方面，具有足够新的 Linux 发行版和 bash 4 的系统应该能够尝试本书中的所有示例。

# 本书适合对象

本书面向管理员和那些具有基本 shell 脚本知识并希望学习如何充分利用编写 shell 脚本的人。

# 约定

在本书中，您会发现许多文本样式，用于区分不同类型的信息。以下是这些样式的一些示例及其含义的解释。

文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄显示如下：“我们还可以在 shell 编程中使用`printf`命令进行打印。”

代码块设置如下：

```
$ name=foo
$ foo="Welcome to foo world"
$ echo $name
foo
$ new_name='$'$name    #new_name just stores string value $foo
$ echo $new_name
$foo
$ eval new_name='$'$name  # eval processes $foo string into variable and  prints                 # foo variable value
Welcome to foo world
```

任何命令行输入或输出都以以下形式编写：

```
$ ps -p $$

```

### 注意

警告或重要提示显示在这样的框中。

### 提示

技巧和窍门看起来像这样。
