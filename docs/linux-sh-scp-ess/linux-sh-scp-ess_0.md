# 前言

GNU/Linux 系统上的 shell 可以说是任何用户最强大的工具。一般来说，shell 充当系统用户和操作系统内核之间的接口。我们使用 shell 来运行命令以执行任务，并经常将输出保存到文件中。虽然这些简单的用例可以通过在 shell 上使用一些命令轻松实现，但有时手头的任务可能比这更复杂。

进入 shell 脚本编写，这是一种神奇的工具，它允许您向 shell 编写逐步说明，告诉它如何执行复杂的任务。然而，除非您知道可以使用的命令，否则仅仅学习编写脚本的语法是不够的。只有这样，脚本才能被重复使用，高效且易于使用。当一个人掌握了 GNU/Linux 系统上可用的命令后，接下来就是疯狂地自动化日常任务——无论是查找文档还是清理早已观看过的旧电影。无论您是其他脚本语言的专家，还是第一次尝试，本书都将向您展示如何使用 shell 脚本做魔术！

# 本书涵盖的内容

第一章, *脚本编写之旅的开始*，告诉您编写 shell 脚本的重要性，以及一个简单的 Hello World shell 脚本程序。它还涵盖了定义变量，内置变量和运算符等基本和必要的 shell 脚本主题。它还包含了有关 shell 扩展的详细解释，这些扩展发生在字符（如~，*，？，[]和{}）中。

第二章, *I/O，重定向管道和过滤器的实践*，讨论了命令和 shell 脚本的标准输入，输出和错误流。它还介绍了如何将它们重定向到其他流的方法。还涵盖了正则表达式等最强大的概念。它为`grep`，`sed`，`uniq`和`tail`等命令提供了过滤输入数据中有用数据的指导。

第三章, *有效的脚本编写*，提供了关于构建 shell 脚本以组织任务的见解。在讨论脚本退出代码之后，它讨论了基本的编程结构，如条件和循环。然后讨论了代码组织成函数和别名的方法。最后，它详细介绍了`xargs`，`pushd`和`popd`的工作原理。

第四章, *模块化和调试*，讨论了通过使用可以被引用的通用代码使 shell 脚本模块化。它还涵盖了脚本的命令行参数的详细信息，以及当脚本出现故障时如何调试。本章还包含了用户如何实现自定义命令完成的信息。

第五章, *自定义环境*，继续讨论 shell 环境-它包含的内容，其重要性，以及最终如何修改它。它还带领读者了解 bash 在启动时使用的不同初始化文件。最后，我们讨论了如何检查命令历史记录和管理运行任务。

第六章, *文件操作*，讨论了文件，这是任何 UNIX 系统的主要组成部分。它涵盖了“一切皆为文件”的基本理念，并带领读者了解基本文件操作，比较文件，查找文件和创建链接。本章还解释了特殊文件和临时文件的概念，以及文件权限的详细信息。

第七章，“欢迎来到进程”，讨论了活跃的可执行文件，以及它们如何成为进程。从列出和监视运行中的进程，它继续讨论如何利用进程替换。接下来，它涵盖了进程调度优先级、信号、陷阱，以及进程如何相互通信。

第八章，“调度任务和嵌入脚本语言”，讨论了通过使用系统 Cron 在适当的时间安排任务。接下来，它涵盖了负责在大多数现代 Linux 系统中编排启动任务的系统。最后，本章包含了如何将其他脚本语言的脚本嵌入到 shell 脚本中的说明。

# 您需要为本书准备什么

读者不需要任何先前的知识来理解本书，尽管对 Linux 有一些熟悉会有所帮助。在软件方面，具有足够新的 Linux 发行版和 bash 4 的系统应该能够尝试本书中的所有示例。

# 本书适合对象

本书面向管理员和那些具有基本 shell 脚本知识并希望学习如何充分利用编写 shell 脚本的人。

# 约定

在本书中，您会发现许多文本样式，用于区分不同类型的信息。以下是这些样式的一些示例及其含义的解释。

文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄显示如下：“我们还可以在 shell 编程中使用`printf`命令进行打印。”

代码块设置如下：

```
$ name=foo
$ foo="Welcome to foo world"
$ echo $name
foo
$ new_name='$'$name    #new_name just stores string value $foo
$ echo $new_name
$foo
$ eval new_name='$'$name  # eval processes $foo string into variable and  prints                 # foo variable value
Welcome to foo world
```

任何命令行输入或输出都以以下形式编写：

```
$ ps -p $$

```

### 注意

警告或重要提示显示在这样的框中。

### 提示

技巧和窍门看起来像这样。

# 读者反馈

我们始终欢迎读者的反馈。请告诉我们您对本书的看法——您喜欢或不喜欢的地方。读者的反馈对我们很重要，因为它可以帮助我们开发出您真正能够充分利用的标题。

要向我们发送一般反馈，只需发送电子邮件至`<feedback@packtpub.com>`，并在主题中提及书名。

如果您在某个专题上有专业知识，并且有兴趣撰写或为一本书做出贡献，请参阅我们的作者指南，网址为[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在您是 Packt 书籍的自豪所有者，我们有许多事情可以帮助您充分利用您的购买。

## 下载示例代码

您可以从您在[`www.packtpub.com`](http://www.packtpub.com)的帐户中下载您购买的所有 Packt Publishing 图书的示例代码文件。如果您在其他地方购买了本书，您可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，以便直接通过电子邮件接收文件。

## 勘误

尽管我们已经尽一切努力确保内容的准确性，但错误确实会发生。如果您在我们的书中发现错误——也许是文本或代码中的错误——我们将不胜感激，如果您能向我们报告。通过这样做，您可以帮助其他读者避免挫折，并帮助我们改进本书的后续版本。如果您发现任何勘误，请访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书，点击**勘误提交表格**链接，并输入您的勘误详情。一旦您的勘误经过验证，您的提交将被接受，并且勘误将被上传到我们的网站或添加到该标题的勘误部分的任何现有勘误列表中。

要查看先前提交的勘误表，请访问[`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support)，并在搜索框中输入书名。所需信息将出现在**勘误**部分。

## 盗版

互联网上侵犯版权的盗版行为是跨所有媒体持续存在的问题。在 Packt，我们非常重视版权和许可的保护。如果您在互联网上发现我们作品的任何非法副本，请立即向我们提供位置地址或网站名称，以便我们采取补救措施。

请通过`<copyright@packtpub.com>`与我们联系，并附上涉嫌盗版材料的链接。

我们感谢您帮助保护我们的作者和我们为您提供有价值内容的能力。

## 问题

如果您对本书的任何方面有问题，可以通过`<questions@packtpub.com>`与我们联系，我们将尽力解决问题。
