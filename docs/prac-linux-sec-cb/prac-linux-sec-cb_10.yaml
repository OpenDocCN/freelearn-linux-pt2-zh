- en: Chapter 10. Security Monitoring and Logging
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第10章 安全监控和日志记录
- en: 'In this chapter, we will discuss the following topics:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将讨论以下主题：
- en: Viewing and managing log files using Logcheck
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Logcheck查看和管理日志文件
- en: Monitoring a network using Nmap
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Nmap监视网络
- en: Using glances for system monitoring
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用glances进行系统监控
- en: Monitoring logs using MultiTail
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用MultiTail监视日志
- en: Using system tools – Whowatch
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用系统工具 - Whowatch
- en: Using system tools – stat
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用系统工具 - stat
- en: Using system tools – lsof
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用系统工具 - lsof
- en: Using system tools – strace
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用系统工具 - strace
- en: Using Lynis
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Lynis
- en: Viewing and managing log files using Logcheck
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Logcheck查看和管理日志文件
- en: As an administrator, while checking for malicious activities on the system or
    any software issue, log files play a very important role. However, with an increasing
    amount of software, the number of log files being created has also increased.
    This makes it very difficult for the administrator to analyze log files properly.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 作为管理员，在检查系统或任何软件问题上的恶意活动时，日志文件起着非常重要的作用。然而，随着软件数量的增加，创建的日志文件数量也在增加。这使得管理员很难正确分析日志文件。
- en: In such scenarios, **Logcheck** is a good tool to help administrators analyze
    and scan log files. Logcheck scans logs for *interesting lines* as per its documentation.
    These lines mainly refer to security issues that have been detected by the tool.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，Logcheck是一个很好的工具，可以帮助管理员分析和扫描日志文件。Logcheck根据其文档扫描*有趣的行*的日志。这些行主要是指工具检测到的安全问题。
- en: Getting ready
  id: totrans-14
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: No specific requirements are needed to use Logcheck on a Linux system.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在Linux系统上使用Logcheck不需要特定的要求。
- en: How to do it…
  id: totrans-16
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'In this section, we will take a look at how to install and configure Logcheck
    as per our requirements:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将看看如何根据我们的要求安装和配置Logcheck：
- en: The first step is to install the package using the command shown in the following
    screenshot:![How to do it…](img/B04234_10_01.jpg)
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一步是使用以下屏幕截图中显示的命令安装软件包：![如何操作…](img/B04234_10_01.jpg)
- en: During the installation, a window will open and show you information about selecting
    a mail server configuration type, as shown in the following screenshot:![How to
    do it…](img/B04234_10_02.jpg)
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在安装过程中，将打开一个窗口，并显示有关选择邮件服务器配置类型的信息，如下面的屏幕截图所示：![如何操作…](img/B04234_10_02.jpg)
- en: Click on **Ok** to continue.
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**确定**继续。
- en: In the next window, select **Internet Site**, and then select **Ok** to continue.![How
    to do it…](img/B04234_10_03.jpg)
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个窗口中，选择**Internet Site**，然后选择**确定**继续。![如何操作…](img/B04234_10_03.jpg)
- en: After the installation has completed, we need to make changes to the `/etc/logcheck/logcheck.conf`
    configuration file.
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，我们需要对`/etc/logcheck/logcheck.conf`配置文件进行更改。
- en: The first thing to edit in the configuration file is the format of the date/time
    stamp, which is used in the subject of the mail sent by Logcheck.![How to do it…](img/B04234_10_04.jpg)
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在配置文件中要编辑的第一件事是日期/时间戳的格式，该格式用于Logcheck发送的邮件的主题。![如何操作…](img/B04234_10_04.jpg)
- en: Next, we can change the value of the `REPORTLEVEL` variable in order to control
    filtering of the logs as per our requirement. We have three options available
    for this, and by default, the value is set to `server`.![How to do it…](img/B04234_10_05.jpg)
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们可以更改`REPORTLEVEL`变量的值，以便根据我们的要求控制日志的过滤。我们有三个选项可用，而默认情况下，该值设置为`server`。
- en: The `workstation` value filters most of the messages and is less verbose. The
    `paranoid` value is useful for systems with high security. It runs as few services
    as possible, and is more verbose.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '`workstation`值过滤了大部分消息，不太冗长。`paranoid`值对于安全性很高的系统很有用。它尽可能少地运行服务，并且更冗长。'
- en: After this, we change the value of the `SENDMAILTO` variable and provide our
    e-mail address to it to receive logs on our e-mail ID.![How to do it…](img/B04234_10_06.jpg)
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 之后，我们更改`SENDMAILTO`变量的值，并向其提供我们的电子邮件地址，以便在我们的电子邮件ID上接收日志。![如何操作…](img/B04234_10_06.jpg)
- en: The mail generated by Logcheck uses different subject lines for different events.
    If we wish to modify these subject lines, we can edit the value of the variables
    shown here:![How to do it…](img/B04234_10_07.jpg)
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Logcheck生成的邮件对不同的事件使用不同的主题行。如果我们希望修改这些主题行，我们可以编辑这里显示的变量的值：![如何操作…](img/B04234_10_07.jpg)
- en: Logcheck, by default, uses the `/etc/logcheck/logcheck.logfiles` file to maintain
    a list of log files to be monitored by it. If we wish to use any other file to
    define the list and if it is in another location, we can edit the `RULEDIR` variable
    to define the new path.![How to do it…](img/B04234_10_08.jpg)
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 默认情况下，Logcheck使用`/etc/logcheck/logcheck.logfiles`文件来维护要由其监视的日志文件列表。如果我们希望使用任何其他文件来定义列表，并且它位于另一个位置，我们可以编辑`RULEDIR`变量以定义新路径。
- en: If we want Logcheck to monitor any particular file apart from what is already
    defined in the `/etc/logcheck/logcheck.logfiles` file, we can add an entry in
    it, as shown here:![How to do it…](img/B04234_10_09.jpg)
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果我们希望Logcheck监视除`/etc/logcheck/logcheck.logfiles`文件中已定义的任何特定文件之外的文件，我们可以在其中添加一个条目，如下所示：![如何操作…](img/B04234_10_09.jpg)
- en: In the preceding file, we added the `/var/log/boot.log` line.
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在上述文件中，我们添加了`/var/log/boot.log`行。
- en: How it works…
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理…
- en: We first install the Logcheck package, and after the installation, we edit its
    configuration `/etc/logcheck/logcheck.conf` file.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先安装Logcheck软件包，安装后，我们编辑其配置`/etc/logcheck/logcheck.conf`文件。
- en: In the configuration file, we change the format of the date/time stamp for logs
    and also the filtering by modifying the `REPORTLEVEL` variable.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 在配置文件中，我们通过修改`REPORTLEVEL`变量来更改日志的日期/时间戳格式和过滤。
- en: Next, we edit the `SENDMAILTO` variable, and enter our e-mail ID to receive
    the logs.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们编辑`SENDMAILTO`变量，并输入我们的电子邮件ID以接收日志。
- en: Using the `etc/logcheck/logcheck.logfiles` file, we define the logs to be monitored
    by Logcheck.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`etc/logcheck/logcheck.logfiles`文件，我们定义要由Logcheck监视的日志。
- en: Monitoring a network using Nmap
  id: totrans-36
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Nmap监视网络
- en: For any network that is either big or small, network monitoring and security
    is a very essential task. Regular monitoring of the network is important to protect
    systems from attacks and also to keep viruses and malware out of a network.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 对于任何规模的网络，网络监控和安全都是非常重要的任务。定期监视网络对于保护系统免受攻击以及防止病毒和恶意软件进入网络都很重要。
- en: '**Nmap**, short for **network mapper**, is a free and open source tool that
    monitors a network, and it is the most versatile tool used by system/network administrators.
    Nmap can be used to perform security scans, explore a network, find open ports
    on remote systems, and perform network audits.'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '**Nmap**，即**网络映射器**，是一个免费开源的工具，用于监视网络，是系统/网络管理员使用的最多功能的工具。Nmap可用于执行安全扫描，探索网络，在远程系统上查找开放端口，并执行网络审计。'
- en: Getting ready
  id: totrans-39
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: To show how Nmap works, we need a minimum of two systems to form a small network.
    On one system, we will install the `nmap` package, while the other system will
    be used as a host to scan.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 为了展示Nmap的工作原理，我们需要至少两个系统来形成一个小型网络。在一个系统上，我们将安装`nmap`软件包，而另一个系统将用作扫描的主机。
- en: How to do it…
  id: totrans-41
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: In this section, we will take a look at how to use Nmap to perform different
    types of scans.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将看看如何使用Nmap执行不同类型的扫描。
- en: 'The first step will be to install the `nmap` package if it is not installed
    already. To do so, we use this command:'
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一步将是安装`nmap`软件包，如果尚未安装。为此，我们使用这个命令：
- en: '[PRE0]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'We get the following output on running the preceding command:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 运行上述命令后，我们得到以下输出：
- en: '![How to do it…](img/B04234_10_10.jpg)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![如何操作...](img/B04234_10_10.jpg)'
- en: To perform a simple scan using Nmap, we can either use the hostname or the IP
    address of the system we want to scan. The command to perform a simple scan will
    be as follows:![How to do it…](img/B04234_10_11.jpg)
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要使用Nmap执行简单的扫描，我们可以使用要扫描的系统的主机名或IP地址。执行简单扫描的命令将如下所示：![如何操作...](img/B04234_10_11.jpg)
- en: In the preceding example, the IP address of the system we are scanning is `192.168.1.105`.
    In the result of the scan, we can see that the target system is running the MySQL
    database server on port `3306`.
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在前面的示例中，我们正在扫描的系统的IP地址是`192.168.1.105`。在扫描结果中，我们可以看到目标系统正在端口`3306`上运行MySQL数据库服务器。
- en: 'Nmap can also be used to scan our own system. To do so, we can run this command:'
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Nmap也可以用来扫描我们自己的系统。为了这样做，我们可以运行这个命令：
- en: '[PRE1]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'We get the following output on running the preceding command:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 运行上述命令后，我们得到以下输出：
- en: '![How to do it…](img/B04234_10_12.jpg)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![如何操作...](img/B04234_10_12.jpg)'
- en: 'If we want to scan more than one system with the same command, we can do so,
    as shown here:'
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果我们想用同一个命令扫描多个系统，我们可以这样做，如下所示：
- en: '[PRE2]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'We can see the scan results of both the systems in the following output:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以在以下输出中看到两个系统的扫描结果：
- en: '![How to do it…](img/B04234_10_13.jpg)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![如何操作...](img/B04234_10_13.jpg)'
- en: 'We can use Nmap to scan a particular network and check which systems are up
    and running in the network using the command given here:'
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们可以使用Nmap来扫描特定的网络，并使用以下命令检查网络中哪些系统正在运行：
- en: '[PRE3]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: When we perform the scan using the `-sP` option, `nmap` skips port detection
    and other things. It simply checks which systems are up and running in the network
    by performing a simple ping.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们使用`-sP`选项进行扫描时，`nmap`会跳过端口检测和其他内容。它只是通过简单的ping检查哪些系统正在网络中运行。
- en: '![How to do it…](img/B04234_10_14.jpg)'
  id: totrans-60
  prefs: []
  type: TYPE_IMG
  zh: '![如何操作...](img/B04234_10_14.jpg)'
- en: If we want to limit our scan to a particular port only, we can tell `nmap` to
    scan that port only using the `-p` option, as shown here:![How to do it…](img/B04234_10_15.jpg)
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果我们只想将我们的扫描限制在特定端口上，我们可以告诉`nmap`只扫描该端口，使用`-p`选项，如下所示：![如何操作...](img/B04234_10_15.jpg)
- en: In the preceding example, we scan for port `22` and `80`, the default port for
    the SSH service and the HTTP (web server) service. As we can see in the preceding
    result, the remote system is running SSH; however, the HTTP port is closed. Hence,
    no web server is running.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 在上面的示例中，我们扫描了端口`22`和`80`，分别是SSH服务和HTTP（Web服务器）服务的默认端口。正如我们在上面的结果中看到的，远程系统正在运行SSH；然而，HTTP端口是关闭的。因此，没有运行Web服务器。
- en: 'While performing a scan of the target system, determining the operating system
    on the system is very important as many exploits are available for a specific
    OS platform. To know the OS of the target system, we use the `-O` option, as shown
    here:'
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在对目标系统进行扫描时，确定系统上的操作系统非常重要，因为针对特定操作系统平台有许多漏洞利用。为了知道目标系统的操作系统，我们使用`-O`选项，如下所示：
- en: '[PRE4]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The result shown in the following image tells us that the target system is
    running the Windows 7 Ultimate version:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图像中显示的结果告诉我们，目标系统正在运行Windows 7 Ultimate版本：
- en: '![How to do it…](img/B04234_10_16.jpg)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![如何操作...](img/B04234_10_16.jpg)'
- en: We have seen that using the `-p` option, we can check which particular port
    is open. Now, let's suppose that the target system has port `22` open, which means
    that SSH is running on the system. If we now want to check the version of the
    SSH service on the remote system, we can use the `-sV` option, as shown here:![How
    to do it…](img/B04234_10_17.jpg)
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们已经看到，使用`-p`选项，我们可以检查哪个特定端口是开放的。现在，假设目标系统的端口`22`是开放的，这意味着系统上正在运行SSH。如果我们现在想要检查远程系统上SSH服务的版本，我们可以使用`-sV`选项，如下所示：![如何操作...](img/B04234_10_17.jpg)
- en: How it works…
  id: totrans-68
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: When Nmap is simply run on an IP address, it does a basic scan and tells us
    which ports are open on the target system. By knowing the open ports, we can identify
    the services running on the system. In the same way, Nmap is used to scan the
    local system by providing the IP address of the local system.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 当Nmap仅在一个IP地址上运行时，它会进行基本扫描，并告诉我们目标系统上哪些端口是开放的。通过了解开放的端口，我们可以识别系统上运行的服务。同样，Nmap用于通过提供本地系统的IP地址来扫描本地系统。
- en: Nmap is used to scan multiple IP address at the same time by providing the IP
    addresses in the same command. Also, Nmap is used to check which systems are up
    and running in the network using the `-sP` option.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap用于通过在同一命令中提供IP地址来同时扫描多个IP地址。此外，Nmap还用于使用`-sP`选项检查网络中哪些系统正在运行。
- en: It is also used to scan for a particular port using the `-p` option and if the
    `-O` option is used, it fingerprints the target system to tell the operating system
    on which it is running.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 它还可以使用`-p`选项扫描特定端口，如果使用`-O`选项，它会对目标系统进行指纹识别，告诉它正在运行的操作系统。
- en: Nmap is also used to do other things such as identify the software version of
    the services running on the target system.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap也用于执行其他操作，比如识别目标系统上运行的服务的软件版本。
- en: Using glances for system monitoring
  id: totrans-73
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用glances进行系统监控
- en: For an administrator, system monitoring is also about monitoring the performance
    of the system by checking the processes and services running on it. But with limited
    space on the screen, it sometimes becomes difficult to have all the information.
    In such situations, we would like to have a tool that can show us maximum information
    about the system, such as CPU, disk I/O, memory, network and so on, in a limited
    space.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 对于管理员来说，系统监控也是通过检查运行在系统上的进程和服务来监控系统的性能。但是在屏幕上有限的空间上，有时很难获得所有的信息。在这种情况下，我们希望有一个工具，可以在有限的空间内向我们展示关于系统的最大信息，如CPU、磁盘I/O、内存、网络等等。
- en: Even though we have individual tools to monitor this information, with Glances,
    an administrator can see the maximum amount of information in the minimum amount
    of space. It can adapt the information dynamically as per the size of the terminal
    window. Glances can highlight programs that use the maximum amount of system resources.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管我们有单独的工具来监视这些信息，但使用Glances，管理员可以在最小的空间内看到最大量的信息。它可以根据终端窗口的大小动态调整信息。Glances可以突出显示使用最大系统资源的程序。
- en: Getting ready
  id: totrans-76
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: If you are installing Glances on Ubuntu, then it is recommended that you use
    Ubuntu version 13.04 and above. For other versions of Linux, it is preferable
    to use the latest version. For our example, we are using Kali Linux 2.0.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您在Ubuntu上安装Glances，则建议使用Ubuntu 13.04及以上版本。对于其他版本的Linux，最好使用最新版本。在我们的例子中，我们使用的是Kali
    Linux 2.0。
- en: How to do it…
  id: totrans-78
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: 'To understand the workings of glances, we will follow the steps given here:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 为了理解glances的工作原理，我们将按照这里给出的步骤进行操作：
- en: 'The first step is to install the package using this command:'
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一步是使用以下命令安装软件包：
- en: '[PRE5]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: After the installation has been completed, we have to edit the `/etc/default/glances`
    file and change the value of the `RUN` variable to `true`, as shown here:![How
    to do it…](img/B04234_10_18.jpg)
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，我们必须编辑`/etc/default/glances`文件，并将`RUN`变量的值更改为`true`，如下所示：![操作步骤…](img/B04234_10_18.jpg)
- en: Doing this will automatically run `glances` during the system startup.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 这样做将在系统启动时自动运行`glances`。
- en: To manually start the tool, simply run the `glances` command. You will get an
    output window, as shown here:![How to do it…](img/B04234_10_19.jpg)
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要手动启动工具，只需运行`glances`命令。您将得到一个输出窗口，如下所示：![操作步骤…](img/B04234_10_19.jpg)
- en: 'In the preceding window, we can see different colors for the text displayed.
    The meaning of these color codes in glances is defined as follows:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的窗口中，我们可以看到显示的文本有不同的颜色。glances中这些颜色代码的含义如下定义：
- en: '**Green**: This means that all is `OK`'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 绿色：这意味着一切“正常”
- en: '**Blue**: This color says `CAREFUL`, attention is needed'
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 蓝色：这种颜色表示“小心”，需要注意
- en: '**Violet**: This color signifies `WARNING`'
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 紫色：这种颜色表示“警告”
- en: '**Red**: This refers to something being `CRITICAL`'
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 红色：这指的是某事“关键”
- en: The color codes work on the basis of the default thresholds defined in the configuration
    file of glances. We can change these threshold values by editing the `/etc/glances/glances.conf`
    file.![How to do it…](img/B04234_10_20.jpg)
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 颜色代码是根据glances配置文件中定义的默认阈值工作的。我们可以通过编辑`/etc/glances/glances.conf`文件来更改这些阈值。![操作步骤…](img/B04234_10_20.jpg)
- en: 'By default, glances refreshes the value at a time interval of 1 second. We
    can change this value when running glances using the `-t` option followed by the
    time in seconds:'
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 默认情况下，glances每秒刷新一次值。我们可以在运行glances时使用`-t`选项后面跟着秒数来更改这个值：
- en: '[PRE6]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: At times, we may not be able to physically access our system, but we still want
    to monitor the performance of the system. Glances can help us do this remotely.
    For this, we first need to enable the client/server mode of Glances on our system
    using the `-s` option and also bind it to the IP address of the system using the
    `-B` option, as shown here:![How to do it…](img/B04234_10_21.jpg)
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 有时，我们可能无法物理访问我们的系统，但我们仍然希望监控系统的性能。Glances可以帮助我们远程进行这项工作。为此，我们首先需要使用`-s`选项在我们的系统上启用Glances的客户端/服务器模式，并使用`-B`选项将其绑定到系统的IP地址，如下所示：![操作步骤…](img/B04234_10_21.jpg)
- en: Now the glances server is running on the system whose IP address is `192.168.1.102`,
    and by default, it runs on port `61209`. If prompted for a password when enabling
    the client/server mode, define any password of your choice.
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在glances服务器正在IP地址为`192.168.1.102`的系统上运行，默认情况下运行在端口`61209`上。在启用客户端/服务器模式时，如果提示输入密码，请定义您选择的任何密码。
- en: 'On the remote system where you want to access glances, run this command:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在您想要访问glances的远程系统上运行此命令：
- en: '[PRE7]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Once we run this command, we will get a window, as shown in the following screenshot,
    where we'll see `Connected to Kali – IP 192.168.1.102/24` in the top-left corner,
    which tells us that we are now accessing glances remotely:![How to do it…](img/B04234_10_22.jpg)
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行此命令后，我们将得到一个窗口，如下面的屏幕截图所示，在左上角我们将看到“连接到Kali - IP 192.168.1.102/24”，这告诉我们我们现在远程访问glances：![操作步骤…](img/B04234_10_22.jpg)
- en: For this command to work on the remote system, it is necessary to have glances
    installed on this remote system as well.
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了使这个命令在远程系统上工作，有必要在这个远程系统上也安装glances。
- en: How it works…
  id: totrans-99
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理…
- en: After the installation of Glances, we enable its `autorun` during the system
    startup.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 安装Glances后，我们启用其在系统启动时的`自动运行`。
- en: We run it using the `glances` command, and we modify the threshold value for
    the color codes by editing the `/etc/glances/glances.conf` file.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用`glances`命令来运行它，并通过编辑`/etc/glances/glances.conf`文件来修改颜色代码的阈值值。
- en: Using the `-t` option, we modify the refresh time interval, and using the `-s`
    option, we enable the client/server mode of Glances, which is then accessed remotely
    on other systems using the `-c` option and the IP address of the system on which
    Glances is running.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`-t`选项，我们可以修改刷新时间间隔，使用`-s`选项，我们可以启用Glances的客户端/服务器模式，然后使用`-c`选项和运行Glances的系统的IP地址，可以在其他系统上远程访问。
- en: Monitoring logs using MultiTail
  id: totrans-103
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用MultiTail监视日志
- en: For any system administrator, monitoring log files is a very tedious task, and
    if we have to refer to more than one log file at the same time to troubleshoot
    any issue, it becomes even more difficult to keep switching between logs.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 对于任何系统管理员来说，监视日志文件是一项非常繁琐的任务，如果我们必须同时参考多个日志文件来排除任何问题，那么在日志之间不断切换会变得更加困难。
- en: For such situations, we can use the **MultiTail** tool, which can help us to
    take a look at multiple log files in real time. Using MultiTail, we can display
    multiple log files in a single window or shell, and it will show us the last few
    lines of the log file in real time.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这种情况，我们可以使用**MultiTail**工具，它可以帮助我们实时查看多个日志文件。使用MultiTail，我们可以在单个窗口或shell中显示多个日志文件，并且它将实时显示日志文件的最后几行。
- en: Getting ready
  id: totrans-106
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'To use MultiTail, we don''t have to set up anything in particular on our Linux
    system. Only the `multitail` package needs to be installed. This can be done using
    this command:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用MultiTail，我们不必在Linux系统上设置任何特定的内容。只需安装`multitail`软件包即可。可以使用以下命令完成：
- en: '[PRE8]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '![Getting ready](img/B04234_10_23.jpg)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![准备工作](img/B04234_10_23.jpg)'
- en: How to do it…
  id: totrans-110
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: 'Once the MultiTail tool has been installed, we can start using it as per our
    requirements using these commands:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 安装了MultiTail工具后，我们可以使用以下命令根据需要开始使用它：
- en: 'If we want to view two log files using `multitail`, we will run this command:'
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果我们想要使用`multitail`查看两个日志文件，我们将运行以下命令：
- en: '[PRE9]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '![How to do it…](img/B04234_10_24.jpg)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![如何做…](img/B04234_10_24.jpg)'
- en: We can see that the screen has been split into two parts, each displaying the
    content of individual log files.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到屏幕已分成两部分，每个部分显示单独日志文件的内容。
- en: If we want to scroll through the two files that are open, just press *b* and
    a menu will pop up, as shown in the following screenshot. From the list, we can
    select the file we want to monitor in detail:![How to do it…](img/B04234_10_25.jpg)
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果我们想要滚动查看已打开的两个文件，只需按下*b*，然后会弹出一个菜单，如下面的屏幕截图所示。从列表中，我们可以选择要详细监视的文件：![如何做…](img/B04234_10_25.jpg)
- en: In the new window that opens up, press *gg* or *G* to move to the top or bottom
    of the scroll window. To exit from the scroll window, press *q*.
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在打开的新窗口中，按*gg*或*G*移动到滚动窗口的顶部或底部。要退出滚动窗口，按*q*。
- en: 'If we want to view three log files in two columns, we can use this command:'
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果我们想要在两列中查看三个日志文件，我们可以使用以下命令：
- en: '[PRE10]'
  id: totrans-119
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '![How to do it…](img/B04234_10_26.jpg)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
  zh: '![如何做…](img/B04234_10_26.jpg)'
- en: The preceding screenshot shows the three log files in two columns.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 上面的屏幕截图显示了两列中的三个日志文件。
- en: 'MultiTail allows us to customize the color for individual log files as we open
    them while merging both of them in the same window. This can be done using this
    command:'
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: MultiTail允许我们在打开它们时为单个日志文件自定义颜色，同时将它们合并在同一个窗口中。可以使用以下命令完成：
- en: '[PRE11]'
  id: totrans-123
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '![How to do it…](img/B04234_10_27.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![如何做…](img/B04234_10_27.jpg)'
- en: How it works…
  id: totrans-125
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理…
- en: When we provide the names of the two log files to MultiTail on the same command
    line, it opens the two files in the same screen by splitting them into two parts.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们在同一命令行上提供两个日志文件的名称给MultiTail时，它会将这两个文件分割成两部分在同一屏幕上打开。
- en: To view more than two log files using MultiTail, we specify the number of columns
    in which the screen should be split using the `-s` option followed by the number
    of columns.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用MultiTail查看两个以上的日志文件，我们使用`-s`选项指定屏幕应该分割成的列数。
- en: MultiTail also allows us to view multiple log files in the same screen without
    splitting the screen by differentiating the files on the basis of color. The color
    can be customized using the `-ci` option.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: MultiTail还允许我们在同一屏幕上查看多个日志文件，而无需通过颜色区分屏幕。可以使用`-ci`选项自定义颜色。
- en: Using system tools – Whowatch
  id: totrans-129
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用系统工具 - Whowatch
- en: While keeping a watch on the network, an administrator would also want to keep
    a watch on users who are currently logged on to the system and also check what
    each user is doing on the machine.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 在监视网络的同时，管理员还希望监视当前登录到系统上的用户，并检查每个用户在计算机上的操作。
- en: '**Whowatch** is the perfect tool for all these tasks. It uses a simple text-based
    interface, which is easy to use and can display information about a username,
    user process, and also the type of connection being used, such as SSH and telnet.'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: '**Whowatch**是执行所有这些任务的完美工具。它使用简单的基于文本的界面，易于使用，并且可以显示有关用户名、用户进程以及正在使用的连接类型（如SSH和telnet）的信息。'
- en: Getting ready
  id: totrans-132
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Since Whowatch doesn''t come as a preinstalled package in Linux, we have to
    install it to use it. The command to install Whowatch is as follows:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 由于Whowatch在Linux中不是预安装的软件包，因此我们必须安装它才能使用。安装Whowatch的命令如下：
- en: '[PRE12]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '![Getting ready](img/B04234_10_28.jpg)'
  id: totrans-135
  prefs: []
  type: TYPE_IMG
  zh: '![准备工作](img/B04234_10_28.jpg)'
- en: How to do it…
  id: totrans-136
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: 'To utilize the Whowatch tool to its maximum benefit, we have to understand
    the details of the tool properly:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 为了充分利用Whowatch工具，我们必须正确理解该工具的细节：
- en: To start using the tool, just enter the `whowatch` command and a screen will
    appear, as shown here:![How to do it…](img/B04234_10_29.jpg)
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要开始使用该工具，只需输入`whowatch`命令，然后会出现一个屏幕，如下所示：![如何做…](img/B04234_10_29.jpg)
- en: The preceding screen lists all the user accounts that are logged in.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 上面的屏幕列出了所有已登录的用户帐户。
- en: From the list, we can select any user account, and when we press *Enter*, we
    can see information about all the programs that a user is running.![How to do
    it…](img/B04234_10_30.jpg)
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从列表中，我们可以选择任何用户帐户，当我们按*Enter*时，我们可以看到有关用户正在运行的所有程序的信息。![如何做…](img/B04234_10_30.jpg)
- en: On the same screen, we have more options at the bottom, using which we can get
    more information about the user and also the programs that have been run by them,
    as shown here:![How to do it…](img/B04234_10_31.jpg)
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在同一屏幕上，我们在底部有更多选项，使用这些选项我们可以获取有关用户以及由他们运行的程序的更多信息，如下所示：![如何做…](img/B04234_10_31.jpg)
- en: On the main screen of Whowatch, we can see a menu at the bottom.![How to do
    it…](img/B04234_10_32.jpg)
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Whowatch的主屏幕上，我们可以看到底部的菜单。![如何做…](img/B04234_10_32.jpg)
- en: We can see here that we have to use the *F9* key to access the **Menu** options.
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们可以看到这里我们必须使用*F9*键来访问**菜单**选项。
- en: Once we press *F9*, we see a menu on the top of the screen. Use the arrow keys
    on the keyboard to move through the menu. When we select the **Process** tab,
    we get a submenu, which gives an option, called the **KILL** signal, to the running
    processes. Similarly, we can see more options in the same submenu:![How to do
    it…](img/B04234_10_33.jpg)
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦我们按下*F9*，我们会在屏幕顶部看到一个菜单。使用键盘上的箭头键在菜单中移动。当我们选择**进程**选项卡时，我们会得到一个子菜单，其中有一个名为**KILL**信号的选项，用于运行的进程。类似地，我们可以在同一个子菜单中看到更多选项：![如何做…](img/B04234_10_33.jpg)
- en: When we move to the **View** tab, we get these options:![How to do it…](img/B04234_10_34.jpg)
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当我们转到**视图**选项卡时，我们会得到这些选项：![如何做…](img/B04234_10_34.jpg)
- en: The last tab is **Help**, under which we have the **Keys** option.![How to do
    it…](img/B04234_10_35.jpg)
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后一个选项卡是**帮助**，在其中我们有**Keys**选项。![如何做…](img/B04234_10_35.jpg)
- en: When we click on **Keys**, it will open up a new window and show you details
    about the keys to be used for different tasks, as shown here:![How to do it…](img/B04234_10_36.jpg)
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当我们点击**Keys**时，它会打开一个新窗口，并显示有关用于不同任务的密钥的详细信息，如下所示：![如何做…](img/B04234_10_36.jpg)
- en: Press *s* to get more information about the system.![How to do it…](img/B04234_10_37.jpg)
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按下*s*以获取有关系统的更多信息。![如何做…](img/B04234_10_37.jpg)
- en: If we press *t*, we get a list of all the processes on the system in a tree
    structure, which we can see here:![How to do it…](img/B04234_10_38.jpg)
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果我们按*t*，我们会得到系统上所有进程的树形结构列表，如下所示：![如何做…](img/B04234_10_38.jpg)
- en: How it works
  id: totrans-150
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理
- en: Whowatch can be started by simply typing `whowatch` in the command line. When
    it starts, it shows a list of usernames that are logged in. Just press *Enter*
    on any username to get information about all the programs running under that user.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: Whowatch可以通过在命令行中简单地键入`whowatch`来启动。启动后，它会显示已登录的用户名列表。只需在任何用户名上按*Enter*即可获取有关该用户下运行的所有程序的信息。
- en: To access more options in Whowatch, we enter the Main menu by pressing *F9*
    key. We then get various tabs such as **Process**, **View**, **Users**, **Help**,
    and so on.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 要在Whowatch中访问更多选项，我们按下*F9*键进入主菜单。然后我们会得到各种选项卡，如**进程**，**视图**，**用户**，**帮助**等。
- en: The **Process** tab gives options to manage processes, while the **View** tab
    gives options to search and view the processes. The **Help** tab has an option
    to see the keys that can be used in Whowatch as shortcuts.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: '**进程**选项卡提供了管理进程的选项，而**视图**选项卡提供了搜索和查看进程的选项。**帮助**选项卡有一个选项，可以查看Whowatch中可用作快捷键的密钥。'
- en: We use different keys to access system information and get a list of all the
    processes.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用不同的密钥来访问系统信息并获取所有进程的列表。
- en: Using system tools – stat
  id: totrans-155
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用系统工具 - stat
- en: While working on Linux, the most commonly used command is `ls`, which gives
    a listing of the files in the directory we specified. However, it shows only a
    little information about the files.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 在Linux上工作时，最常用的命令是`ls`，它会列出我们指定目录中的文件。但是，它只显示有关文件的少量信息。
- en: Instead, if we use the `stat` command, we can get more information about the
    files/directories when compared to using `ls`. Because `stat` is able to get information
    about a file from its node, it is able to give more information about the files.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 相反，如果我们使用`stat`命令，与使用`ls`相比，我们可以获得有关文件/目录的更多信息。因为`stat`能够从其节点获取有关文件的信息，所以它能够提供更多有关文件的信息。
- en: Getting ready
  id: totrans-158
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: Since `stat` is a built-in command of Linux, nothing else is needed to be installed
    in order to use it.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 由于`stat`是Linux的内置命令，因此不需要安装其他内容即可使用它。
- en: How to do it…
  id: totrans-160
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: This section will explain the options and usage of the `stat` command. Using
    stat, we will can get the detailed status of a particular file or filesystem.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 本节将解释`stat`命令的选项和用法。使用stat，我们可以获取特定文件或文件系统的详细状态。
- en: Suppose we have a file called `example.txt`. When we perform a long-listing
    of this file using the `ls -l` command, we get information about the file, which
    includes when the file was last modified.
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 假设我们有一个名为`example.txt`的文件。当我们使用`ls -l`命令对此文件进行长列表时，我们会得到有关文件的信息，包括文件上次修改的时间。
- en: 'However, when we use the `stat` command to check the details of the same file,
    it shows extra information about the file, and the difference can be seen here:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，当我们使用`stat`命令来检查相同文件的详细信息时，它会显示有关文件的额外信息，差异如下所示：
- en: '![How to do it…](img/B04234_10_39.jpg)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![如何做…](img/B04234_10_39.jpg)'
- en: In the preceding output, we can see that the Modify and Change time are same.
    But the access time has changed. It also shows the permissions in both the `octal`
    and `rwx` formats. Many other details are also shown.
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在前面的输出中，我们可以看到修改和更改时间是相同的。但访问时间已经改变。它还以`八进制`和`rwx`格式显示了权限。还显示了许多其他细节。
- en: Now, let's rename the file as `sample.txt`. After this, if we check the details
    of `sample.txt` file using `stat`, we can see that the `Change` time has been
    updated:![How to do it…](img/B04234_10_40.jpg)
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，让我们将文件重命名为`sample.txt`。之后，如果我们使用`stat`检查`sample.txt`文件的详细信息，我们会看到`更改`时间已更新：![如何做…](img/B04234_10_40.jpg)
- en: Let's suppose we have three files, `sample.txt`, `sample1.txt`, and `sample2.txt`.
    If we want to check the details of each of these files, we can either use `stat`
    individually with each file, or else we can use wildcards with `stat` to show
    the details of all three files in a group, as shown here:![How to do it…](img/B04234_10_41.jpg)
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 假设我们有三个文件，`sample.txt`，`sample1.txt`和`sample2.txt`。如果我们想要检查每个文件的详细信息，我们可以分别使用`stat`，或者我们可以使用`stat`和通配符一起显示所有三个文件的详细信息，如下所示：![如何做…](img/B04234_10_41.jpg)
- en: We can use the `stat` command to check the details of the directories as well:![How
    to do it…](img/B04234_10_42.jpg)
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们也可以使用`stat`命令来检查目录的详细信息：![如何做…](img/B04234_10_42.jpg)
- en: In the case of the directory, we can see an extra detail about the number of
    links.
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在目录的情况下，我们可以看到关于链接数量的额外细节。
- en: If we use the `stat` command for any default directory of Linux, such as `/etc/`,
    we can see that we get a big value for the number of links:![How to do it…](img/B04234_10_43.jpg)
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果我们对Linux的任何默认目录（例如`/etc/`）使用`stat`命令，我们会发现链接数量很大：![如何做…](img/B04234_10_43.jpg)
- en: If we want to see the details of a filesystem, we can't use `ls` for this. However,
    `stat` works on a filesystem as well. We get the same kind of details as filesystems
    and files:![How to do it…](img/B04234_10_44.jpg)
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果我们想要查看文件系统的详细信息，不能使用`ls`。但是，`stat`也适用于文件系统。我们得到与文件系统和文件相同类型的详细信息：![如何做…](img/B04234_10_44.jpg)
- en: If we use the `-f` option with the `stat` command while checking the details
    of filesystem, it will display the status of the filesystem.![How to do it…](img/B04234_10_45.jpg)
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果我们在检查文件系统的详细信息时使用`stat`命令的`-f`选项，它将显示文件系统的状态。![如何做…](img/B04234_10_45.jpg)
- en: How it works
  id: totrans-173
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的
- en: We use the `stat` command to get detailed information about a file. When a file
    is renamed, `stat` tells us the time that the change was made. It also gives information
    about multiple files at the same time using wildcards with the `stat` command.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用`stat`命令来获取有关文件的详细信息。当文件被重命名时，`stat`会告诉我们更改的时间。还可以使用`stat`命令的通配符一次获取多个文件的信息。
- en: '`stat` works on directories and filesystems as well. In the case of a filesystem,
    `stat` can display its status using the `-f` option.'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: '`stat`也适用于目录和文件系统。在文件系统的情况下，`stat`可以使用`-f`选项显示其状态。'
- en: Using system tools – lsof
  id: totrans-176
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用系统工具 - lsof
- en: At times, we may face situations where we are unable to unmount a disk due to
    the fact that some files are being used. However, we may not be able to understand
    which file is being referred to. In such situations, we can check which files
    are being opened by which processes running on the system.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，我们可能会遇到无法卸载磁盘的情况，因为有些文件正在使用。但是，我们可能无法理解指的是哪个文件。在这种情况下，我们可以检查系统上正在运行的进程打开了哪些文件。
- en: This can be done using the **lsof** command, which stands for **List Open Files**.
    Since Linux considers everything, such as directories, devices, sockets, and so
    on, as a file, we can use `lsof` to easily identify all the open files.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 这可以通过**lsof**命令来实现，它代表**列出打开的文件**。由于Linux将一切都视为文件，例如目录、设备、套接字等，我们可以使用`lsof`轻松识别所有打开的文件。
- en: Getting ready
  id: totrans-179
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: To use the `lsof` command, it is recommended that you are logged in from root
    account, or else, use `sudo` from a nonroot account so that the output of the
    `lsof` command is not limited.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用`lsof`命令，建议您从root帐户登录，否则，请从非root帐户使用`sudo`，以便`lsof`命令的输出不受限制。
- en: How to do it…
  id: totrans-181
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: In this section, we will explore the different options that can be used with
    the `lsof` command to understand how it works.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将探讨可与`lsof`命令一起使用的不同选项，以了解其工作原理。
- en: 'If we just run `lsof`, it will list all the open files that belong to any active
    process on the system. If the output is long, we can use the `less` command to
    scroll through the output:'
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果我们只运行`lsof`，它将列出系统上任何活动进程拥有的所有打开文件。如果输出很长，我们可以使用`less`命令来滚动输出：
- en: '[PRE13]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: The output that is displayed is shown in columns, such as `COMMAND`, `PID`,
    `USER`, `FD`, `TYPE`, `DEVICE`, and so on, for better understanding of the files.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 显示的输出以列的形式显示，例如`COMMAND`、`PID`、`USER`、`FD`、`TYPE`、`DEVICE`等，以更好地理解文件。
- en: The `FD` column has information about file descriptions such as the current
    working directory (`cwd`), root directory (`rtd`), program text (`txt`), and so
    on. If the `FD` column contains information such as `0u`, `1u`, and so on; the
    number signifies the actual file descriptor and the letter signifies different
    modes (`read` access, `write` access, and `read/write` access).
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: '`FD`列包含有关文件描述的信息，例如当前工作目录（`cwd`）、根目录（`rtd`）、程序文本（`txt`）等。如果`FD`列包含`0u`、`1u`等信息；数字表示实际文件描述符，字母表示不同的模式（`读`访问、`写`访问和`读/写`访问）。'
- en: '![How to do it…](img/B04234_10_46.jpg)'
  id: totrans-187
  prefs: []
  type: TYPE_IMG
  zh: '![如何做…](img/B04234_10_46.jpg)'
- en: 'To check the list of all open files for a particular user, we use the `-u`
    option followed by the username:'
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要检查特定用户的所有打开文件列表，我们使用`-u`选项，后跟用户名：
- en: '[PRE14]'
  id: totrans-189
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '![How to do it…](img/B04234_10_47.jpg)'
  id: totrans-190
  prefs: []
  type: TYPE_IMG
  zh: '![如何做…](img/B04234_10_47.jpg)'
- en: 'Using `lsof` we can check whether there are any processes running on a particular
    port. To do so, we have to use the `-i` option and run this command:'
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`lsof`，我们可以检查是否有任何进程在特定端口上运行。为此，我们必须使用`-i`选项并运行此命令：
- en: '[PRE15]'
  id: totrans-192
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '![How to do it…](img/B04234_10_48.jpg)'
  id: totrans-193
  prefs: []
  type: TYPE_IMG
  zh: '![如何做…](img/B04234_10_48.jpg)'
- en: In the preceding example, we checked for a list of running processes on port
    `22`, and we saw that the SSH process was running.
  id: totrans-194
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在上面的示例中，我们检查了端口`22`上运行的进程列表，并且看到SSH进程正在运行。
- en: If we want to check the exact number of open files on the system, we can run
    this command:![How to do it…](img/B04234_10_49.jpg)
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果我们想要检查系统上打开文件的确切数量，可以运行此命令：![如何做…](img/B04234_10_49.jpg)
- en: In the preceding example, there are lots of open files, 5220 to be specific.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 在上面的示例中，有很多打开的文件，具体为5220个。
- en: 'To check which user is looking at what file and which commands are being run
    by the user, we can use this command:'
  id: totrans-197
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要检查哪个用户正在查看哪个文件，以及用户正在运行哪些命令，我们可以使用以下命令：
- en: '[PRE16]'
  id: totrans-198
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '![How to do it…](img/B04234_10_50.jpg)'
  id: totrans-199
  prefs: []
  type: TYPE_IMG
  zh: '![如何做…](img/B04234_10_50.jpg)'
- en: We have many more options while using `lsof`, which can be explored by referring
    to the `man` page of the `lsof` command.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用`lsof`时，我们有更多选项可供使用，可以参考`lsof`命令的`man`页面进行探索。
- en: How it works
  id: totrans-201
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作
- en: Running the `lsof` command shows a listing of all the open files on the system.
    Using the `-u` option and specifying the username, we get a list of open files
    for a particular user.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 运行`lsof`命令会显示系统上所有打开的文件的列表。使用`-u`选项并指定用户名，我们可以获得特定用户的打开文件列表。
- en: When we use the `-i` option and specify a port number, we get information about
    any process running on that port.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们使用`-i`选项并指定端口号时，我们会得到有关在该端口上运行的任何进程的信息。
- en: When we use both the `-i` and `-u` options with a particular username, we get
    information about the files and commands being accessed by that user.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们同时使用`-i`和`-u`选项与特定用户名时，我们会得到有关该用户访问的文件和命令的信息。
- en: Using system tools – strace
  id: totrans-205
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用系统工具 - strace
- en: When running any command or program on our Linux machine, you might wonder what
    the background working of it is. For this, we have a very useful tool in Linux
    called **strace**.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的Linux机器上运行任何命令或程序时，您可能会想知道其背景工作是什么。为此，在Linux中有一个非常有用的工具叫做**strace**。
- en: This a command-line tool that can be also used as a diagnostic or debugging
    tool. strace monitors the interaction between processes and the Linux kernel and
    is helpful when we want to debug the execution of any program.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个命令行工具，也可以用作诊断或调试工具。strace监视进程与Linux内核之间的交互，在我们想要调试任何程序的执行时很有帮助。
- en: Getting ready
  id: totrans-208
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: This tool is available for all Linux-based systems by default. Hence, nothing
    else needs to be configured to start using strace.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 该工具默认适用于所有基于Linux的系统。因此，无需配置其他内容即可开始使用strace。
- en: How to do it…
  id: totrans-210
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 操作步骤…
- en: Let's see how strace can be used in various ways to trace the execution of any
    program from start to end.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看如何以各种方式使用strace来跟踪任何程序的执行从开始到结束。
- en: To trace the execution of any executable command in Linux, simply run the `strace`
    command followed by the executable command. If we use `strace` for the `ls` command,
    we get this output:![How to do it…](img/B04234_10_51.jpg)
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要跟踪Linux中任何可执行命令的执行，只需运行`strace`命令，然后跟上可执行命令。如果我们对`ls`命令使用`strace`，我们会得到这个输出：![操作步骤…](img/B04234_10_51.jpg)
- en: In the preceding screenshot, the output displayed has been truncated. If we
    check the last few lines of the output, we see some write system calls where the
    listing of the current directly has been displayed:![How to do it…](img/B04234_10_52.jpg)
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在上面的屏幕截图中，显示的输出已被截断。如果我们检查输出的最后几行，我们会看到一些写系统调用，其中显示了当前目录的列表：![操作步骤…](img/B04234_10_52.jpg)
- en: To check the listing, we can run `ls` alone in the same directory, and we'll
    see the same listing that we saw in the previous image:![How to do it…](img/B04234_10_53.jpg)
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要检查列表，我们可以在同一目录中单独运行`ls`，我们将看到与前一张图片中看到的相同的列表：![操作步骤…](img/B04234_10_53.jpg)
- en: 'If we want to have a statistical summary of the `strace` command to be displayed
    in a neat manner, we can use the `-c` option:'
  id: totrans-215
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果我们想要以整洁的方式显示`strace`命令的统计摘要，我们可以使用`-c`选项：
- en: '[PRE17]'
  id: totrans-216
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'When the preceding command is run, we get the following output:'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 运行上述命令时，我们会得到以下输出：
- en: '![How to do it…](img/B04234_10_54.jpg)'
  id: totrans-218
  prefs: []
  type: TYPE_IMG
  zh: '![操作步骤…](img/B04234_10_54.jpg)'
- en: We can also display the timestamp at the start of each output line using the
    `-t` option:![How to do it…](img/B04234_10_55.jpg)
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们还可以使用`-t`选项在每个输出行的开头显示时间戳：![操作步骤…](img/B04234_10_55.jpg)
- en: 'The default `strace` command displays all the system calls made by the executable
    program. If we wish to show only a specific call, we can use the `-e` option.
    So, if we want to see only the open system call of the `ls` command, we have to
    run this command:'
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 默认的`strace`命令显示可执行程序所做的所有系统调用。如果我们希望仅显示特定调用，可以使用`-e`选项。因此，如果我们只想看到`ls`命令的打开系统调用，我们必须运行此命令：
- en: '[PRE18]'
  id: totrans-221
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'When the preceding command is run, we get the following output:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 运行上述命令时，我们会得到以下输出：
- en: '![How to do it…](img/B04234_10_56.jpg)'
  id: totrans-223
  prefs: []
  type: TYPE_IMG
  zh: '![操作步骤…](img/B04234_10_56.jpg)'
- en: 'If we wish to save the output of the `strace` command in a file for the purpose
    of viewing it later, we can do so using the `-o` option:'
  id: totrans-224
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果我们希望将`strace`命令的输出保存在文件中以便以后查看，我们可以使用`-o`选项：
- en: '[PRE19]'
  id: totrans-225
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Here, `output.txt` is the name of the file that will be created to save the
    output of the `strace` command:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，`output.txt`是将保存`strace`命令输出的文件的名称：
- en: '![How to do it…](img/B04234_10_57.jpg)'
  id: totrans-227
  prefs: []
  type: TYPE_IMG
  zh: '![操作步骤…](img/B04234_10_57.jpg)'
- en: Note
  id: totrans-228
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: If we want to use strace in any process that is currently running, we can do
    so using the ID of the process. In our example, we are using the process of `firefox`,
    whose process ID is `16301`.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们想要在当前正在运行的任何进程中使用strace，可以使用该进程的ID。在我们的示例中，我们正在使用`firefox`的进程，其进程ID为`16301`。
- en: We run the following command and also save the output of the command in the
    `firefox_output.txt` file using the `-o` option:![How to do it…](img/B04234_10_58.jpg)
  id: totrans-230
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们运行以下命令，并使用`-o`选项将命令的输出保存在`firefox_output.txt`文件中：![操作步骤…](img/B04234_10_58.jpg)
- en: We can then check the content of the output file using the `tail` command or
    any text editor of our choice.
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，我们可以使用`tail`命令或我们选择的任何文本编辑器来检查输出文件的内容。
- en: How it works
  id: totrans-232
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理
- en: When the `strace` command is used on any other Linux command or program, it
    traces its interaction with the Linux kernel.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 当在任何其他Linux命令或程序上使用`strace`命令时，它会跟踪其与Linux内核的交互。
- en: When the `-c` option is used with `strace`, we get a statistical summary, and
    if the `-t` option is used, we get time stamp preceding each output line.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 当与`strace`一起使用`-c`选项时，我们会得到统计摘要，如果使用`-t`选项，我们会得到每个输出行之前的时间戳。
- en: Using the `-e` option, we see only a specific call of program execution, such
    as open system calls. Using the `-o` option, we write the output of the `strace`
    command to a file.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`-e`选项，我们只看到程序执行的特定调用，比如打开系统调用。使用`-o`选项，我们将`strace`命令的输出写入文件。
- en: Using Lynis
  id: totrans-236
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Lynis
- en: Monitoring log files on Linux manually is a very tedious task. To make it easy,
    we can use auditing tools on our Linux system, which will be able to automatically
    scan the whole system for any kind of security issues.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 在Linux上手动监视日志文件是一项非常繁琐的任务。为了简化操作，我们可以在Linux系统上使用审计工具，它将能够自动扫描整个系统以查找任何安全问题。
- en: '**Lynis** is easy to use and we can get a security report in a faster duration
    of time. This is helpful when scanning Linux systems for vulnerabilities and malwares.'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: '**Lynis**易于使用，我们可以在更短的时间内获得安全报告。这在扫描Linux系统以查找漏洞和恶意软件时非常有用。'
- en: Getting ready
  id: totrans-239
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'To use Lynis, it''s not necessary to install it. If you are using an Ubuntu
    system, you can use apt-get to install the Lynis package:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用Lynis，无需安装。如果您使用的是Ubuntu系统，可以使用apt-get安装Lynis软件包：
- en: '[PRE20]'
  id: totrans-241
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'When the preceding command is run, we get the following output:'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 运行上述命令后，我们会得到以下输出：
- en: '![Getting ready](img/B04234_10_59.jpg)'
  id: totrans-243
  prefs: []
  type: TYPE_IMG
  zh: '![准备就绪](img/B04234_10_59.jpg)'
- en: For other Linux distributions, simply download the package from [https://cisofy.com/download/lynis/](https://cisofy.com/download/lynis/).
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 对于其他Linux发行版，只需从[https://cisofy.com/download/lynis/](https://cisofy.com/download/lynis/)下载软件包即可。
- en: After downloading it, you just need to use `./lynis audit system` and the scan
    will start.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 下载完成后，只需使用`./lynis audit system`即可开始扫描。
- en: How to do it…
  id: totrans-246
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'Using Lynis is very simple. Just start the scanning process and everything
    will be done automatically. Let''s explore the working of the tool now:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Lynis非常简单。只需启动扫描过程，一切都将自动完成。现在让我们来探索工具的工作方式：
- en: 'To start the scan, just type this command:'
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 开始扫描，只需输入以下命令：
- en: '[PRE21]'
  id: totrans-249
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'When the preceding command is run, we get the following output:'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 运行上述命令后，我们会得到以下输出：
- en: '![How to do it…](img/B04234_10_60.jpg)'
  id: totrans-251
  prefs: []
  type: TYPE_IMG
  zh: '![如何操作…](img/B04234_10_60.jpg)'
- en: Once we run the preceding command, scanning will start and it will continue
    for some time, depending on the packages it finds on the system. The scan includes
    different sections, such as system tools, kernel, filesystem, and many more.
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行上述命令后，扫描将开始，并且将根据系统上找到的软件包而持续一段时间。扫描包括不同的部分，如系统工具、内核、文件系统等。
- en: Once the scan has been completed, we can see an overview of the details at the
    end of the output screen:![How to do it…](img/B04234_10_61.jpg)
  id: totrans-253
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 扫描完成后，我们可以在输出屏幕的末尾看到详细信息的概述：![如何操作…](img/B04234_10_61.jpg)
- en: After the scanning is done, a report is generated and saved in the `/var/log/lynis.log`
    file. When we read the content of this file, we get an output similar to what
    is shown here:![How to do it…](img/B04234_10_62.jpg)
  id: totrans-254
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 扫描完成后，将生成报告并保存在`/var/log/lynis.log`文件中。当我们阅读此文件的内容时，会得到类似于此处所示的输出：![如何操作…](img/B04234_10_62.jpg)
- en: We can scroll through the log file and see which tests Lynis has performed.
  id: totrans-255
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们可以滚动查看日志文件，了解Lynis执行了哪些测试。
- en: 'In the preceding report, what needs our attention are the entries containing
    the word `Warning`. Hence we can run the given command to find all the lines in
    the report that contain this word:'
  id: totrans-256
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在上述报告中，需要我们关注的是包含`警告`一词的条目。因此，我们可以运行给定的命令来查找报告中包含此单词的所有行：
- en: '[PRE22]'
  id: totrans-257
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'When the preceding command is run, we get the following output:'
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 运行上述命令后，我们会得到以下输出：
- en: '![How to do it…](img/B04234_10_63.jpg)'
  id: totrans-259
  prefs: []
  type: TYPE_IMG
  zh: '![如何操作…](img/B04234_10_63.jpg)'
- en: 'As we have done for `Warning`, in the same way, we can find all the lists of
    all the `Suggestion` given by Lynis using this command:'
  id: totrans-260
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 与`警告`一样，我们也可以使用此命令找到Lynis给出的所有`建议`的列表：
- en: '[PRE23]'
  id: totrans-261
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'When the preceding command is run, we get the following output:'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 运行上述命令后，我们会得到以下输出：
- en: '![How to do it…](img/B04234_10_64.jpg)'
  id: totrans-263
  prefs: []
  type: TYPE_IMG
  zh: '![如何操作…](img/B04234_10_64.jpg)'
- en: We can also check `Warning` and `Suggestion` by scrolling to the end of the
    report in the `/var/log/lynis.log` file. We will see a result similar to what
    is shown here:![How to do it…](img/B04234_10_65.jpg)
  id: totrans-264
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们还可以通过滚动到`/var/log/lynis.log`文件的末尾来检查`警告`和`建议`。我们将看到类似于此处所示的结果：![如何操作…](img/B04234_10_65.jpg)
- en: How it works
  id: totrans-265
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的
- en: The Lynis scan can be started by executing the `lynis -c` command. Nothing needs
    to be done while the scan is running.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 可以通过执行`lynis -c`命令来启动Lynis扫描。扫描运行时无需进行任何操作。
- en: After the completion of the scan, the report is saved in the `/var/log/lynis.log`
    file.
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 扫描完成后，报告将保存在`/var/log/lynis.log`文件中。
- en: We find some lines in the report that contain the word `Warning` and `Suggestion`
    as these are lines that need our attention according to the requirements of Lynis.
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 在报告中找到一些包含`警告`和`建议`的行，因为这些是根据Lynis的要求需要我们关注的行。
