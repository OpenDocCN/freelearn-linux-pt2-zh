- en: Chapter 3. Local Filesystem Security
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第3章 本地文件系统安全
- en: 'In this chapter, we will discuss the following:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将讨论以下内容：
- en: Viewing file and directory details using the ls command
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`ls`命令查看文件和目录详细信息
- en: Changing the file permissions using the chmod command
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`chmod`命令更改文件权限
- en: Implementing access control list (ACL)
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实施访问控制列表（ACL）
- en: File handling using the mv command (moving and renaming)
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`mv`命令（移动和重命名）处理文件
- en: Install and configure a basic LDAP server on Ubuntu
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Ubuntu上安装和配置基本LDAP服务器
- en: Viewing file and directory details using the ls command
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用`ls`命令查看文件和目录详细信息
- en: The `ls` command is used to list files in a directory, and it is similar to
    the `dir` command in DOS. This command can be used with various parameters to
    give different results.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '`ls`命令用于列出目录中的文件，类似于DOS中的`dir`命令。该命令可与各种参数一起使用，以提供不同的结果。'
- en: Getting ready
  id: totrans-9
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Since the `ls` command is a built-in command of Linux, we don't need to install
    anything else to use it.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 由于`ls`命令是Linux的内置命令，因此我们无需安装其他任何内容即可使用它。
- en: How to do it…
  id: totrans-11
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: 'Now, let''s take a look at how we can use `ls` in different ways to get a variety
    of results by just following these given steps:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看一下如何以不同方式使用`ls`来通过遵循这些给定步骤获得各种结果：
- en: To take a look at the simple listing of files in a current directory, type `ls:`![How
    to do it…](img/B04234_03_01.jpg)
  id: totrans-13
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要查看当前目录中文件的简单列表，请键入`ls：`![如何做…](img/B04234_03_01.jpg)
- en: To get more information about the files and directories listed using the `ls`
    command, add a type identifier, as shown here:![How to do it…](img/B04234_03_02.jpg)
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要获取有关使用`ls`命令列出的文件和目录的更多信息，请添加类型标识符，如下所示：![如何做…](img/B04234_03_02.jpg)
- en: When the preceding identifier is used, the executable files have an asterisk
    at the end of the name, while the directories have a slash, and so on.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用上述标识符时，可执行文件的名称末尾会有一个星号，而目录则有一个斜杠，依此类推。
- en: To check out details of files, such as the creation dates, owners, and permissions,
    run the command with the `l` identifier, as shown here:![How to do it…](img/B04234_03_03.jpg)
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要查看文件的详细信息，例如创建日期、所有者和权限，请使用`l`标识符运行命令，如下所示：![如何做…](img/B04234_03_03.jpg)
- en: To find a listing of all the hidden files in the current directory, use the
    `a` identifier, as shown here:![How to do it…](img/B04234_03_04.jpg)
  id: totrans-17
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要查找当前目录中所有隐藏文件的列表，请使用`a`标识符，如下所示：![如何做…](img/B04234_03_04.jpg)
- en: Files that begin with a period (also called **dot files**) are hidden files,
    which are not shown if the `-a` option is not used.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 以句点开头的文件（也称为**点文件**）是隐藏文件，如果未使用`-a`选项，则不会显示这些文件。
- en: To print the file size in readable form, such as MB, GB, TB, and so on, instead
    of printing in terms of bytes, we can use the `-h` identifier along with `-l`
    identifier, as show here:![How to do it…](img/B04234_03_05.jpg)
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了以可读的形式打印文件大小，例如MB、GB、TB等，而不是以字节打印，我们可以使用`-h`标识符以及`-l`标识符，如下所示：![如何做…](img/B04234_03_05.jpg)
- en: If you wish to exclude all the files and display only their subdirectories,
    then you can use the `-d` option, as follows:![How to do it…](img/B04234_03_06.jpg)
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您希望排除所有文件并仅显示它们的子目录，则可以使用`-d`选项，如下所示：![如何做…](img/B04234_03_06.jpg)
- en: The `ls` command when used with the `-R` option will display the contents of
    the subdirectories, too:![How to do it…](img/B04234_03_07.jpg)
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当与`-R`选项一起使用`ls`命令时，将显示子目录的内容：![如何做…](img/B04234_03_07.jpg)
- en: How it works…
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理…
- en: When we use different options with the `ls` command, it gives us different results
    in terms of listing a directory. We can use any option as per our requirements.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们使用`ls`命令的不同选项时，它会根据我们的要求给出不同的目录列表结果。我们可以根据需要使用任何选项。
- en: It is recommended that you get into the habit of using `ls –lah` so that you
    can always find the listing in readable sizes.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 建议您养成使用`ls -lah`的习惯，这样您就可以始终找到可读大小的列表。
- en: Changing the file permissions using the chmod command
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用`chmod`命令更改文件权限
- en: '**Change Mode** or **chmod** is a Linux command that is used to modify the
    access permissions of files and directories. Everybody wants to keep their data
    secure and properly organized. For this reason, Linux has a concept that associates
    owners and groups with every file and directory. These owners and groups have
    different permissions to access a particular file.'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '**Change Mode**或**chmod**是Linux命令，用于修改文件和目录的访问权限。每个人都希望保护其数据并进行适当的组织。因此，Linux有一个概念，将所有者和组与每个文件和目录相关联。这些所有者和组具有不同的权限来访问特定文件。'
- en: Getting ready
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Before we take a look at the different usages of the `chmod` command, we need
    to know the different types of users and the symbolic representation used:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们查看`chmod`命令的不同用法之前，我们需要了解不同类型的用户和使用的符号表示：
- en: '`u` is used for user/owner'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`u`用于用户/所有者'
- en: '`g` is used for a group'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`g`用于组'
- en: '`o` is used for others'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`o`用于其他用户'
- en: Now, create a file called `testfile.txt`, to try out the different commands
    of `chmod`.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，创建一个名为`testfile.txt`的文件，以尝试`chmod`的不同命令。
- en: How to do it…
  id: totrans-33
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: 'Now, we will take a look at how to use `chmod` in different ways in order to
    set different permissions:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将看一下如何以不同方式使用`chmod`以设置不同的权限：
- en: 'If we want to change a single permission for users (owners, groups, or others),
    we use the `+` symbol to add the permission, as shown in the following command:'
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果我们想要更改用户（所有者、组或其他用户）的单个权限，我们使用`+`符号来添加权限，如下命令所示：
- en: '[PRE0]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The preceding command will add the `execute` permission for the owner of the
    file:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令将为文件所有者添加`执行`权限：
- en: '![How to do it…](img/B04234_03_17.jpg)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![如何做…](img/B04234_03_17.jpg)'
- en: 'If we want to add multiple permissions, we can do this through a single command.
    We just need to separate different permissions using a comma, as shown here:'
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果我们想要添加多个权限，我们可以通过单个命令来实现。我们只需要使用逗号分隔不同的权限，如下所示：
- en: '[PRE1]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The preceding command will add the `execute` permission for the group and other
    users of the file:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令将为文件的组和其他用户添加`执行`权限：
- en: '![How to do it…](img/B04234_03_18.jpg)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
  zh: '![如何做…](img/B04234_03_18.jpg)'
- en: 'If we want to remove a permission, we just use the `-` symbol instead of `+`,
    as shown here:'
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果我们想要删除权限，我们只需使用`-`符号，而不是`+`，如下所示：
- en: '[PRE2]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'This will remove the `execute` permission for the other users of the particular
    file:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 这将删除特定文件的其他用户的`执行`权限：
- en: '![How to do it…](img/B04234_03_19.jpg)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![如何做…](img/B04234_03_19.jpg)'
- en: 'Suppose we wish to add or remove a permission for all the users (owner, group,
    and others); we can do this through a single command using the `a` option, which
    signifies all users, as shown here:'
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 假设我们希望为所有用户（所有者、组和其他人）添加或删除权限；我们可以通过使用`a`选项来完成这个单一命令，该选项表示所有用户，如下所示：
- en: 'To add the `read` permission for all the users, use this command:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 要为所有用户添加`读`权限，请使用此命令：
- en: '[PRE3]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'To remove the `read` permission for all the users, use this command:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 要删除所有用户的`读`权限，请使用此命令：
- en: '[PRE4]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'This is shown in the following screenshot:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 这在下面的屏幕截图中显示：
- en: '![How to do it…](img/B04234_03_20.jpg)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![如何做…](img/B04234_03_20.jpg)'
- en: 'Here, we suppose that we want to add a particular permission to all the files
    in a directory. Now, instead of running the command for all the files individually,
    we can use the `-R` option, which signifies that the given operation is recursive.
    So, to give `execute` permission for the other users and all the files in a directory,
    the command will be as follows:'
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这里，我们假设我们想要为目录中的所有文件添加特定权限。现在，我们可以使用`-R`选项，而不是单独为所有文件运行命令，该选项表示给定操作是递归的。因此，为了给其他用户和目录中的所有文件添加`执行`权限，命令将如下所示：
- en: '[PRE5]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Have a look at the following screenshot showing
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 看一下下面的屏幕截图
- en: '![How to do it…](img/B04234_03_21.jpg)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![如何做…](img/B04234_03_21.jpg)'
- en: 'To copy the permissions of a particular file to another file, we can use the
    `reference` option:'
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要将特定文件的权限复制到另一个文件，我们可以使用`reference`选项：
- en: '[PRE6]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Here, we applying the permissions of `file1` to another file called `file2`.
    The same command can be used to apply the permissions of one directory to another
    directory:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们将`file1`的权限应用到另一个名为`file2`的文件。相同的命令也可以用于将一个目录的权限应用到另一个目录：
- en: '![How to do it…](img/B04234_03_22.jpg)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![如何做…](img/B04234_03_22.jpg)'
- en: How it works…
  id: totrans-62
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: 'When `chmod` is used with a symbolic representation, we already know the following:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 当`chmod`与符号表示一起使用时，我们已经知道以下内容：
- en: '`u` is used for a user/owner'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`u`用于用户/所有者'
- en: '`g` is used for a group'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`g`用于组'
- en: '`o` is used for others'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`o`用于其他人'
- en: 'Also, different permissions are referred to as follows:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 另外，不同的权限被称为如下：
- en: '`r`: read'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`r`：读'
- en: '`w`: write'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`w`：写'
- en: '`x`: execute'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`x`：执行'
- en: So, using the preceding commands, we change the permissions for the user, group,
    or others as per our requirements.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，使用上述命令，我们根据我们的要求更改用户、组或其他人的权限。
- en: There's more...
  id: totrans-72
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多…
- en: 'We can set permissions with `chmod` using numbers as well, which is called
    the **Octal** representation. Using numbers, we can edit permissions for an owner,
    group, and others, all at the same time. The syntax of the command is as follows:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 我们也可以使用数字来使用`chmod`设置权限，这被称为**八进制**表示。使用数字，我们可以同时编辑所有者、组和其他人的权限。命令的语法如下：
- en: '`chmod xxx file/directory`'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`chmod xxx 文件/目录`'
- en: Here, `xxx` refers to a three digit number ranging from `1`-`7`. The first digit
    refers to the owner's permission, while the group is represented by the second
    digit, and third digit refers to the permissions of others.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，`xxx`指的是从`1`到`7`的三位数字。第一位数字表示所有者的权限，而组由第二位数字表示，第三位数字表示其他人的权限。
- en: 'When we use the octal representation `r`, `w`, and `x` permissions have a specific
    number value, as mentioned here:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们使用八进制表示时，`r`、`w`和`x`权限具有特定的数字值，如下所述：
- en: '*r=4*'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*r=4*'
- en: '*w=2*'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*w=2*'
- en: '*x=1*'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*x=1*'
- en: 'Now, a `read` and `execute` permission is represented as follows:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，`读`和`执行`权限表示如下：
- en: '*r-x = 4+0+1 = 5*'
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*r-x = 4+0+1 = 5*'
- en: 'Similarly, a `read`, `write`, and `execute` permission is calculated as follows:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，`读`、`写`和`执行`权限的计算如下：
- en: '*rwx = 4+2+1 = 7*'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*rwx = 4+2+1 = 7*'
- en: 'If we wish to give only the `read` permission, it will be as follows:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们只希望给予`读`权限，将如下所示：
- en: '*r-- = 4+0+0 = 4*'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*r-- = 4+0+0 = 4*'
- en: 'So, now if we the run the following command, it gives the permission as calculated:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，现在如果我们运行以下命令，它会给出计算的权限：
- en: '[PRE7]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Here''s the screenshot:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 这是屏幕截图：
- en: '![There''s more...](img/B04234_03_23.jpg)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![还有更多…](img/B04234_03_23.jpg)'
- en: Implementing access control list (ACL)
  id: totrans-90
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 实施访问控制列表（ACL）
- en: Implementing the basic file permissions using `chmod` is not enough, so we can
    use ACLs. In addition to providing permissions for the owner and group of a particular
    file, we can set permissions for any user, user group, or group of all the users
    who are not in a group of a particular user using ACLs.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`chmod`实现基本文件权限是不够的，因此我们可以使用ACL。除了为特定文件的所有者和组提供权限外，我们还可以使用ACL为任何用户、用户组或不属于特定用户组的所有用户组设置权限。
- en: Getting ready
  id: totrans-92
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Before starting with the setting of permissions using ACLs, we need to confirm
    whether ACLs are enabled or not. We can do this by trying to view the ACLs for
    any file, as shown in this example:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始使用ACL设置权限之前，我们需要确认ACL是否已启用。我们可以通过尝试查看任何文件的ACL来确认这一点，如本例所示：
- en: '[PRE8]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'The preceding command will show an output similar to the following if the ACLs
    are enabled:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 如果ACL已启用，上述命令将显示类似于以下内容的输出：
- en: '![Getting ready](img/B04234_03_24.jpg)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![准备工作](img/B04234_03_24.jpg)'
- en: How to do it…
  id: totrans-97
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: 'To understand more about ACLs, let''s perform these steps:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更好地理解ACL，让我们执行以下步骤：
- en: First, we will create three users and give them names—`user1`, `user2`, and
    `user3`:![How to do it…](img/B04234_03_25.jpg)
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，我们将创建三个用户并给他们命名—`user1`、`user2`和`user3`：![如何做…](img/B04234_03_25.jpg)
- en: The preceding command is used to change the password information, which is optional.
    You can ignore it if you want to. However, in this case, you will need to log
    in with the password of a particular user as and when required.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令用于更改密码信息，这是可选的。如果你愿意，你可以忽略它。但是，在这种情况下，您将需要根据需要使用特定用户的密码登录。
- en: Next, create a group with any name, such as `group1`. After creating the group,
    we will add the three users, created in the previous step, to this group:![How
    to do it…](img/B04234_03_26.jpg)
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，创建一个名为`group1`的组。创建组后，我们将在此组中添加在上一步中创建的三个用户：![如何做…](img/B04234_03_26.jpg)
- en: Next, we will create the `/example` directory and change its ownership to `user1`:![How
    to do it…](img/B04234_03_27.jpg)
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将创建`/example`目录并将其所有权更改为`user1`：![如何做…](img/B04234_03_27.jpg)
- en: Open a new terminal window and log in from `user1`. After this, change to the
    `/example` directory, which was created in the previous example, and inside it,
    create a directory with any name, such as `accounts`:![How to do it…](img/B04234_03_28.jpg)
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开一个新的终端窗口并从`user1`登录。然后，切换到在上一个示例中创建的`/example`目录，并在其中创建一个任意名称的目录，比如`accounts`：![如何做…](img/B04234_03_28.jpg)
- en: Now, suppose `user1` wants to give `write` permission to `user2` only in the
    accounts directory. To do so, `user1` has to set `write` permission in groups.
    But doing so will give write permission to `user3` also, and we don't want this
    to happen. So, `user1` will grant write access to `user2` using ACLs, as shown
    here:![How to do it…](img/B04234_03_29.jpg)
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，假设`user1`想要仅在`accounts`目录中向`user2`授予`write`权限。为此，`user1`必须在组中设置`write`权限。但这样做将给`user3`也赋予写权限，我们不希望发生这种情况。因此，`user1`将使用ACL向`user2`授予写访问权限，如下所示：![如何做…](img/B04234_03_29.jpg)
- en: Now, we will check the permissions in the `accounts` directory:![How to do it…](img/B04234_03_30.jpg)
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们将检查`accounts`目录中的权限：![如何做…](img/B04234_03_30.jpg)
- en: We can see that in the preceding image, only `user1` and `user2` have `write`
    permission in the directory, and the others have no permissions.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到在前面的图像中，只有`user1`和`user2`在目录中有`write`权限，其他人没有权限。
- en: Open a new terminal and log in from `user2`. Then, change to the `/example`
    directory:![How to do it…](img/B04234_03_31.jpg)
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开一个新的终端并从`user2`登录。然后，切换到`/example`目录：![如何做…](img/B04234_03_31.jpg)
- en: Let's try to make a directory in the `accounts` folder. Since `user2` has `write`
    permission, this should be successful:![How to do it…](img/B04234_03_32.jpg)
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们尝试在`accounts`文件夹中创建一个目录。由于`user2`有`write`权限，这应该是成功的：![如何做…](img/B04234_03_32.jpg)
- en: Next, open a new terminal and log in from `user3`. Then, change to the `/example`
    directory:![How to do it…](img/B04234_03_33.jpg)
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，打开一个新的终端并从`user3`登录。然后，切换到`/example`目录：![如何做…](img/B04234_03_33.jpg)
- en: Try to change to the `accounts` directory. Since `user3` does not have any permission
    over the directory, it will be denied:![How to do it…](img/B04234_03_34.jpg)
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 尝试切换到`accounts`目录。由于`user3`对该目录没有任何权限，将被拒绝：![如何做…](img/B04234_03_34.jpg)
- en: There's more…
  id: totrans-111
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更多信息…
- en: We might want to grant the `execute` permission for only two users from a group
    of users. If we do this by setting the permission using `chmod`, all the users
    from the group will get the execute permission. However, we do not want this.
    This kind of situation can be handled using ACLs.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可能希望仅为一组用户中的两个用户授予`execute`权限。如果我们使用`chmod`设置权限，所有组中的用户都将获得执行权限。然而，我们不希望这样。可以使用ACL来处理这种情况。
- en: In the preceding steps, we have set permissions on a file individually for each
    user, thus avoiding the chance of allowing others to also have any permissions.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的步骤中，我们为每个用户单独设置了文件的权限，从而避免了允许其他人也具有任何权限的机会。
- en: Whenever we deal with file permissions, it is better to take a backup of the
    permissions if your files are important.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 每当处理文件权限时，如果您的文件很重要，最好备份权限。
- en: 'Here, we suppose that we have an `example` directory that contains a few important
    files. Then, back up the permissions using this command:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们假设有一个包含一些重要文件的`example`目录。然后，使用以下命令备份权限：
- en: '[PRE9]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '![There''s more…](img/B04234_03_35.jpg)'
  id: totrans-117
  prefs: []
  type: TYPE_IMG
  zh: '![更多信息…](img/B04234_03_35.jpg)'
- en: The preceding command backs up the permissions and stores them in a file called
    `permissions.acl`.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的命令备份权限并将其存储在名为`permissions.acl`的文件中。
- en: 'Now, if we want to restore the permissions, the command to do this is as follows:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，如果我们想要恢复权限，可以使用以下命令：
- en: '[PRE10]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'This shown in the following screenshot:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 这在下面的截图中显示：
- en: '![There''s more…](img/B04234_03_36.jpg)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![更多信息…](img/B04234_03_36.jpg)'
- en: This will restore and back up all the permissions to where they were while creating
    the backup.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 这将恢复并备份所有权限到创建备份时的状态。
- en: File handling using the mv command (moving and renaming)
  id: totrans-124
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用mv命令进行文件处理（移动和重命名）
- en: The **mv** or **move** command is used when we wish to move files from one directory
    to another, and we don't want to create duplicates while doing this (something
    that happens when using the `cp` command).
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们希望将文件从一个目录移动到另一个目录时，并且不希望在此过程中创建副本（这在使用`cp`命令时会发生），则使用**mv**或**move**命令。
- en: Getting ready…
  id: totrans-126
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪…
- en: Since `mv` is a built-in command of Linux, we don't have to configure anything
    else to understand how it works.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 由于`mv`是Linux的内置命令，我们不需要配置其他内容来理解它的工作原理。
- en: How it works…
  id: totrans-128
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理…
- en: 'On every Linux system, this command is installed by default. Let''s take a
    look at how to use the `mv` command by taking different kinds of examples:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 在每个Linux系统上，默认安装了这个命令。让我们看看如何使用`mv`命令，通过不同种类的例子：
- en: 'To move the `testfile1.txt` file from the current directory to any other directory,
    such as `home/practical`/`example`, the command is as follows:'
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`testfile1.txt`文件从当前目录移动到其他目录，比如`home/practical/example`，命令如下：
- en: '[PRE11]'
  id: totrans-131
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: The preceding command will work only when the location of the source file is
    different from the destination.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 只有当源文件的位置与目标不同时，前面的命令才能起作用。
- en: 'When we move the file using the preceding command, the file will get deleted
    from the previous location:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 使用前面的命令移动文件时，文件将从先前的位置中删除：
- en: '![How it works…](img/B04234_03_37.jpg)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![工作原理…](img/B04234_03_37.jpg)'
- en: 'To move multiple files using a single command, we can use this command:'
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要使用单个命令移动多个文件，可以使用以下命令：
- en: '[PRE12]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'When using the preceding command, all the files that we are moving should be
    in the same source location:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用前面的命令时，我们要移动的所有文件都应该在同一个源位置：
- en: '![How it works…](img/B04234_03_38.jpg)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![它是如何工作的...](img/B04234_03_38.jpg)'
- en: 'To move a directory, the command is the same as the one used to move a file.
    Suppose we have a `directory1` directory in the current directory and we want
    to move it to the `/home/practical/example` location, the command will be as follows:'
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要移动目录，命令与移动文件的命令相同。假设我们在当前目录中有一个名为`directory1`的目录，希望将其移动到`/home/practical/example`位置，则命令如下：
- en: '[PRE13]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'This shown in the following screenshot:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 如下所示的截图：
- en: '![How it works…](img/B04234_03_39.jpg)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![它是如何工作的...](img/B04234_03_39.jpg)'
- en: 'The `mv` command is also used to rename files and directories. Suppose that
    we have an `example_1.txt` file and wish to rename it `example_2.txt`, the command
    to do this will be as follows:'
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`mv`命令也用于重命名文件和目录。假设我们有一个名为`example_1.txt`的文件，希望将其重命名为`example_2.txt`，则执行此操作的命令如下：'
- en: '[PRE14]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'The preceding command works when the destination location is the same as the
    source location:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 当目标位置与源位置相同时，前面的命令也适用：
- en: '![How it works…](img/B04234_03_40.jpg)'
  id: totrans-146
  prefs: []
  type: TYPE_IMG
  zh: '![它是如何工作的...](img/B04234_03_40.jpg)'
- en: 'Renaming a directory also works in the same way as renaming a file. Suppose
    we have a `test_directory_1` directory and we want to rename it `test_directory_2`,
    then the command will be as follows:'
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重命名目录的操作方式与重命名文件的操作方式相同。假设我们有一个名为`test_directory_1`的目录，我们想将其重命名为`test_directory_2`，那么命令将如下所示：
- en: '[PRE15]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'The execution of the preceding command can be seen in the following screenshot:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 可以在以下截图中看到前面命令的执行情况：
- en: '![How it works…](img/B04234_03_41.jpg)'
  id: totrans-150
  prefs: []
  type: TYPE_IMG
  zh: '![它是如何工作的...](img/B04234_03_41.jpg)'
- en: When we use the `mv` command to move or rename a large number of files or directories,
    we can check whether the command works successfully or not using the `-v` option.
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当我们使用`mv`命令移动或重命名大量文件或目录时，可以使用`-v`选项来检查命令是否成功执行。
- en: 'We may want to move all the text files from the current directory to the `/home/practical/example`
    folder and also check them. To do this, use the following command:'
  id: totrans-152
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们可能希望将当前目录中的所有文本文件移动到`/home/practical/example`文件夹，并对它们进行检查。要做到这一点，请使用以下命令：
- en: '[PRE16]'
  id: totrans-153
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'The execution of the preceding command can be seen in the following screenshot:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 可以在以下截图中看到前面命令的执行情况：
- en: '![How it works…](img/B04234_03_42.jpg)'
  id: totrans-155
  prefs: []
  type: TYPE_IMG
  zh: '![它是如何工作的...](img/B04234_03_42.jpg)'
- en: This also works when moving or renaming a directory:![How it works…](img/B04234_03_43.jpg)
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这也适用于移动或重命名目录：![它是如何工作的...](img/B04234_03_43.jpg)
- en: 'When we use the `mv` command to move a file to another location and a file
    already exists there with the same name, then the existing file gets overwritten
    when using the default command. However, if we wish to show a pop-up notification
    before overwriting the file, then we have to use the `-i` option, as shown here:'
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当我们使用`mv`命令将文件移动到另一个位置，并且目标位置已经存在同名文件时，默认命令会覆盖现有文件。但是，如果我们希望在覆盖文件之前显示弹出通知，则必须使用`-i`选项，如下所示：
- en: '[PRE17]'
  id: totrans-158
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'When the preceding command is run, it will notify us that a file with the same
    name already exists in the destination location. Only when we press *y* will the
    command complete; otherwise, it will get cancelled:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 运行前面的命令时，它会通知我们目标位置已经存在同名文件。只有当我们按下*y*时，命令才会完成；否则，它将被取消：
- en: '![How it works…](img/B04234_03_44.jpg)'
  id: totrans-160
  prefs: []
  type: TYPE_IMG
  zh: '![它是如何工作的...](img/B04234_03_44.jpg)'
- en: When using the `mv` command to move a file to another location where a file
    with the same name already exists, using the `-u` option will update the file
    in the destination location only if the source file is newer than the destination
    file.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`mv`命令将文件移动到另一个位置时，如果目标位置已经存在同名文件，则使用`-u`选项将仅在源文件较新时才更新目标位置的文件。
- en: 'We have two files, `file_1.txt` and `file_2.txt`, at the source location. First,
    check the details of the file using this command:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在源位置有两个文件，`file_1.txt`和`file_2.txt`。首先，使用以下命令检查文件的详细信息：
- en: '[PRE18]'
  id: totrans-163
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Now let''s check the details of the files at the destination location:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们检查一下目标位置的文件详细信息：
- en: '[PRE19]'
  id: totrans-165
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Now, move the files using this command:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，使用以下命令移动文件：
- en: '[PRE20]'
  id: totrans-167
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: '![How it works…](img/B04234_03_45.jpg)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![它是如何工作的...](img/B04234_03_45.jpg)'
- en: We see that `file1.txt` and `file2.txt` have been moved to the destination location
    and have updated the earlier files because of the new time stamp of the source
    files.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 我们看到`file1.txt`和`file2.txt`已经移动到目标位置，并且由于源文件的新时间戳，它们已经更新了之前的文件。
- en: Suppose we move multiple files and in the destination location, a few files
    with the same name as the source already exist, which we don't want to update.
    In such a case, we can use the `-n` option, as shown in the following steps.
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 假设我们移动多个文件，并且在目标位置已经存在与源文件同名的文件，而我们不希望更新这些文件。在这种情况下，我们可以使用`-n`选项，如下所示。
- en: 'We have two files, `file_1.txt` and `file_2.txt`, at the source location. First,
    check the details of the files using this command:'
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们在源位置有两个文件，`file_1.txt`和`file_2.txt`。首先，使用以下命令检查文件的详细信息：
- en: '[PRE21]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Now, move the files using this command:'
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，使用以下命令移动文件：
- en: '[PRE22]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'Let''s check the details of the files in the destination location:'
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们检查一下目标位置的文件详细信息：
- en: '[PRE23]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: The files with the same name have not been moved, which can be checked by observing
    their timestamp:![How it works…](img/B04234_03_46.jpg)
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 同名文件并没有被移动，可以通过它们的时间戳进行验证：![它是如何工作的...](img/B04234_03_46.jpg)
- en: 'When moving file, if the destination location already has a file with the same
    name, then we can also create a backup of the destination file before it is overwritten
    by the new one. To do this, we use the `-b` option:'
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在移动文件时，如果目标位置已经有同名文件，那么在新文件覆盖之前，我们还可以创建目标文件的备份。为此，我们使用`-b`选项：
- en: '[PRE24]'
  id: totrans-179
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: Now, let's check the details of the files in the destination location. In the
    details, we have files named `file1.txt~` and `file2.txt~`. These files are backup
    files that can be verified by the timestamp, which is older than those of `file1.txt`
    and `file2.txt`:![How it works…](img/B04234_03_47.jpg)
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，让我们检查一下目标位置的文件详细信息。在详细信息中，我们有名为`file1.txt~`和`file2.txt~`的文件。这些文件是备份文件，可以通过时间戳进行验证，时间戳比`file1.txt`和`file2.txt`的时间戳要早：![它是如何工作的...](img/B04234_03_47.jpg)
- en: There's more…
  id: totrans-181
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: You can learn more about the `mv` command by typing `man`, `mv`, or `mv --help`.
    This will display its manual page where we can explore more details about the
    command.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过键入`man`、`mv`或`mv --help`来了解更多关于`mv`命令的信息。这将显示其手册页面，我们可以在其中探索有关该命令的更多细节。
- en: Install and configure a basic LDAP server on Ubuntu
  id: totrans-183
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Ubuntu上安装和配置基本的LDAP服务器
- en: '**Lightweight Directory Access Protocol** or **LDAP** is a protocol used to
    manage access to a file and directory hierarchy from some centralized location.
    The directory is similar to a database; however, it is likely to contain more
    expressive, attribute-based information. LDAP is mainly used for centralized authentication.'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 轻量级目录访问协议（LDAP）是一种用于从某个集中位置管理对文件和目录层次结构的访问的协议。目录类似于数据库；但是，它可能包含更具表达力的基于属性的信息。LDAP主要用于集中式身份验证。
- en: An LDAP server helps to control who has access to the read and update information
    in the directory.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: LDAP服务器有助于控制谁可以访问目录中的读取和更新信息。
- en: Getting ready
  id: totrans-186
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: To install and configure LDAP, we need to first create a Ubuntu server. The
    current version of the Ubuntu server installation media can be found at [http://www.ubuntu.com/download/server](http://www.ubuntu.com/download/server).
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 要安装和配置LDAP，我们首先需要创建一个Ubuntu服务器。可以在[http://www.ubuntu.com/download/server](http://www.ubuntu.com/download/server)找到Ubuntu服务器安装媒体的当前版本。
- en: After downloading it, follow the steps given for the installation of the Ubuntu
    server.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 下载完成后，按照提供的步骤安装Ubuntu服务器。
- en: We need a second system with the Desktop version of Ubuntu installed. This will
    be used to access your LDAP server through a web interface.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要第二个安装了Ubuntu桌面版的系统。这将用于通过Web界面访问您的LDAP服务器。
- en: Once this is done, we can proceed with the installation of LDAP.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 完成后，我们可以继续安装LDAP。
- en: How to do it…
  id: totrans-191
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'We shall now start with the process of installing and configuring LDAP on the
    Ubuntu server. The `slapd` package is required to install LDAP, and it is present
    in Ubuntu''s default repositories:'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在将开始在Ubuntu服务器上安装和配置LDAP的过程。安装LDAP需要`slapd`软件包，并且它存在于Ubuntu的默认存储库中：
- en: 'We will first update the package list on the server from Ubuntu''s repositories
    to get information about the latest versions of all the packages and their dependencies:'
  id: totrans-193
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们首先需要从Ubuntu的存储库中更新服务器上的软件包列表，以获取有关所有软件包及其依赖关系的最新版本的信息：
- en: '[PRE25]'
  id: totrans-194
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'Now, run the command to install the `slapd` package in order to to install
    LDAP:'
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，运行命令以安装`slapd`软件包以安装LDAP：
- en: '[PRE26]'
  id: totrans-196
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'The following screenshot shows the output of this command:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了此命令的输出：
- en: '![How to do it…](img/B04234_03_48.jpg)'
  id: totrans-198
  prefs: []
  type: TYPE_IMG
  zh: '![如何操作...](img/B04234_03_48.jpg)'
- en: During the installation process, you will be prompted to enter and confirm an
    administrator password, which will be used for the administrator account of LDAP.
    Configure any password of your choice and complete the installation process:![How
    to do it…](img/B04234_03_49.jpg)
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在安装过程中，您将被提示输入并确认管理员密码，该密码将用于LDAP的管理员帐户。配置您选择的任何密码并完成安装过程：![如何操作...](img/B04234_03_49.jpg)
- en: 'Next, we need to install some additional utilities that are required with LDAP:'
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们需要安装一些与LDAP一起使用的附加实用程序：
- en: '[PRE27]'
  id: totrans-201
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'The output of the command can be seen in the following screenshot:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 该命令的输出如下截图所示：
- en: '![How to do it…](img/B04234_03_50.jpg)'
  id: totrans-203
  prefs: []
  type: TYPE_IMG
  zh: '![如何操作...](img/B04234_03_50.jpg)'
- en: 'Once the installation part is complete, we will start to reconfigure the LDAP
    package as per our requirements. Type this command to start the package configuration
    tool:'
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装部分完成后，我们将根据我们的要求重新配置LDAP软件包。键入此命令以启动软件包配置工具：
- en: '[PRE28]'
  id: totrans-205
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: This will start a series of questions regarding the configuration of the software.
    We need to choose the options one by one as per our requirements.
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这将开始一系列关于软件配置的问题。我们需要根据我们的要求逐个选择选项。
- en: First, you will be asked **Omit OpenLDAP server configuration?** Select **No**
    and continue:![How to do it…](img/B04234_03_51.jpg)
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，您将被问到**省略OpenLDAP服务器配置？** 选择**否**并继续：![如何操作...](img/B04234_03_51.jpg)
- en: Next, you need to enter the domain name. You can use an already existing domain
    name on the server or create anything of your choice. We have used `example.com`
    here:![How to do it…](img/B04234_03_52.jpg)
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，您需要输入域名。您可以在服务器上使用已经存在的域名或创建任何您喜欢的内容。我们在这里使用了`example.com`：![如何操作...](img/B04234_03_52.jpg)
- en: The next step will be to ask for the **Organization Name**, which can be anything
    of your choice:![How to do it…](img/B04234_03_53.jpg)
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一步将是要求输入**组织名称**，可以是您喜欢的任何内容：![如何操作...](img/B04234_03_53.jpg)
- en: You will be asked to enter the administrator password for LDAP. We had already
    configured this during the installation of LDAP. Use the same password, or you
    change it to something else in this step:![How to do it…](img/B04234_03_54.jpg)
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将被要求输入LDAP的管理员密码。我们在安装LDAP时已经配置了这个。在这一步中使用相同的密码，或者更改为其他密码：![如何操作...](img/B04234_03_54.jpg)
- en: Next, we need to select the **HDB** when prompted to choose **Database backend
    to use?** option:![How to do it…](img/B04234_03_55.jpg)
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们需要在提示选择要使用的数据库后端时选择**HDB**：![如何操作...](img/B04234_03_55.jpg)
- en: You will be asked whether you wish to remove the database when `slapd` is purged.
    Select **No** here:![How to do it…](img/B04234_03_56.jpg)
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当`slapd`被清除时，您将被问及是否希望删除数据库。在这里选择**否**：![如何操作...](img/B04234_03_56.jpg)
- en: In the next step, select **Yes** to move the old database, and allow the configuration
    process to create a new database:![How to do it…](img/B04234_03_57.jpg)
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一步中，选择**是**以移动旧数据库，并允许配置过程创建新数据库：![如何操作...](img/B04234_03_57.jpg)
- en: Now, choose **No** when asked **Allow LDAPv2** **protocol?**.![How to do it…](img/B04234_03_58.jpg)
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，在询问**允许LDAPv2协议？**时选择**否**。![如何操作...](img/B04234_03_58.jpg)
- en: 'Once the configuration process is done, we will install the `phpldapadmin`
    package. This will help in administering LDAP through the web interface:'
  id: totrans-215
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置过程完成后，我们将安装`phpldapadmin`软件包。这将帮助通过Web界面管理LDAP：
- en: '[PRE29]'
  id: totrans-216
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'The execution of this command can be seen in the following screenshot:'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 此命令的执行结果如下截图所示：
- en: '![How to do it…](img/B04234_03_59.jpg)'
  id: totrans-218
  prefs: []
  type: TYPE_IMG
  zh: '![操作方法...](img/B04234_03_59.jpg)'
- en: 'Once the installation is completed, open the configuration file of phpldapadmin
    to configure a few values:'
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，打开phpldapadmin的配置文件以配置一些值：
- en: '[PRE30]'
  id: totrans-220
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'This is shown in the following screenshot:'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 可以在以下截图中看到：
- en: '![How to do it…](img/B04234_03_60.jpg)'
  id: totrans-222
  prefs: []
  type: TYPE_IMG
  zh: '![操作方法...](img/B04234_03_60.jpg)'
- en: 'Search for the given section, and modify it to reflect the domain name or the
    IP address of the Ubuntu server:'
  id: totrans-223
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 搜索给定部分，并修改以反映Ubuntu服务器的域名或IP地址：
- en: '[PRE31]'
  id: totrans-224
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'This is shown in the following screenshot:'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 可以在以下截图中看到：
- en: '![How to do it…](img/B04234_03_61.jpg)'
  id: totrans-226
  prefs: []
  type: TYPE_IMG
  zh: '![操作方法...](img/B04234_03_61.jpg)'
- en: 'Next, edit the following entry and insert the domain name that we had given
    when we reconfigured `slapd`:'
  id: totrans-227
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，编辑以下条目并插入我们在重新配置`slapd`时给出的域名：
- en: '[PRE32]'
  id: totrans-228
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: Give the domain name in the form of values to the `dc` attribute in the preceding
    line. Since our domain name was `example.com`, the value in the preceding line
    will be entered as `dc=example, dc=com`.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 在前一行的`dc`属性中以值的形式给出域名。由于我们的域名是`example.com`，因此前一行中的值将输入为`dc=example, dc=com`。
- en: '![How to do it…](img/B04234_03_62.jpg)'
  id: totrans-230
  prefs: []
  type: TYPE_IMG
  zh: '![操作方法...](img/B04234_03_62.jpg)'
- en: 'Find the following line, and enter the domain name as the `dc` attribute again.
    For the `cn` attribute, the value will be `admin` only:'
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 找到以下行，并再次输入域名作为`dc`属性。对于`cn`属性，值将仅为`admin`：
- en: '[PRE33]'
  id: totrans-232
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'This can be seen in the following screenshot:'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 可以在以下截图中看到：
- en: '![How to do it…](img/B04234_03_63.jpg)'
  id: totrans-234
  prefs: []
  type: TYPE_IMG
  zh: '![操作方法...](img/B04234_03_63.jpg)'
- en: 'Search for the section that reads similarly to what is shown in the following
    code, and first uncomment the line and then set the value to `true`:'
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 搜索类似于以下代码所示的部分，首先取消注释该行，然后将值设置为`true`：
- en: '[PRE34]'
  id: totrans-236
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'This can be seen in the following screenshot:'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 可以在以下截图中看到：
- en: '![How to do it…](img/B04234_03_64.jpg)'
  id: totrans-238
  prefs: []
  type: TYPE_IMG
  zh: '![操作方法...](img/B04234_03_64.jpg)'
- en: After making all the changes, save and close the file.
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在进行所有更改后，保存并关闭文件。
- en: When the configuration of `phpldapadmin` is complete, open a browser in the
    other system that has the desktop version of Ubuntu. In the address bar of the
    browser, type the domain name or the IP address of the server, followed by `/phpldapadmin`,
    as `domain_name_or_IP_address/phpldapadmin`:![How to do it…](img/B04234_03_65.jpg)
  id: totrans-240
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当`phpldapadmin`的配置完成后，在另一台安装了Ubuntu桌面版的系统中打开浏览器。在浏览器的地址栏中输入服务器的域名或IP地址，后面加上`/phpldapadmin`，如`domain_name_or_IP_address/phpldapadmin`：![操作方法...](img/B04234_03_65.jpg)
- en: Once the `phpldapadmin` page opens, on the left-hand side we find the **login**
    link. Click on it and you will get a login prompt:![How to do it…](img/B04234_03_66.jpg)
  id: totrans-241
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开`phpldapadmin`页面后，在左侧找到**登录**链接。单击它，将会出现登录提示：![操作方法...](img/B04234_03_66.jpg)
- en: The login screen has the correct **Login DN** details if `phpldapadmin` has
    been configured correctly so far. This is `cn=admin,dc=example,dc=com` in our
    case.
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果`phpldapadmin`到目前为止已经正确配置，登录界面将显示正确的**登录DN**详细信息。在我们的情况下是`cn=admin,dc=example,dc=com`。
- en: Once you enter the administrator password correctly, the admin interface will
    be shown:![How to do it…](img/B04234_03_67.jpg)
  id: totrans-243
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 正确输入管理员密码后，将显示管理员界面：![操作方法...](img/B04234_03_67.jpg)
- en: In the admin interface on the left-hand side where you see the domain components
    (`dc=example,dc=co`), click on the *plus* sign next to it. It will show the admin
    login being used:![How to do it…](img/B04234_03_68.jpg)
  id: totrans-244
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧的管理员界面中，找到域组件(`dc=example,dc=co`)，点击其旁边的*加号*。它将显示正在使用的管理员登录：![操作方法...](img/B04234_03_68.jpg)
- en: Our basic LDAP server is now up and running.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的基本LDAP服务器现在已经启动运行。
- en: How it works…
  id: totrans-246
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: We first create an Ubuntu server, and then on top of it, we install the `slapd`
    package to install LDAP. Once it is completely installed, we install the additional
    package that is required. Then, we reconfigure LDAP as per our requirements.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 首先创建一个Ubuntu服务器，然后在其上安装`slapd`软件包以安装LDAP。一旦完全安装完成，我们安装所需的附加软件包。然后，根据我们的要求重新配置LDAP。
- en: Once reconfiguration is complete, we install the `phpldapadmin` package, which
    will help us in managing the LDAP server through the web interface using a browser.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 重新配置完成后，我们安装`phpldapadmin`软件包，这将帮助我们通过浏览器的Web界面管理LDAP服务器。
