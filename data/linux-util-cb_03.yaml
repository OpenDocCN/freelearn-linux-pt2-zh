- en: Chapter 3. Files and Directories
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第3章。文件和目录
- en: 'In this chapter we will cover:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖：
- en: Copying, removing, and updating files and directories
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 复制、删除和更新文件和目录
- en: Finding files using find and locate
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用find和locate查找文件
- en: Creating text files – vim, Emacs, and others
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建文本文件 - vim、Emacs等
- en: Using the file command
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用文件命令
- en: Using grep to find patterns
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用grep查找模式
- en: Compressing files using ZIP and TAR
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用ZIP和TAR压缩文件
- en: Other helpful commands such as stat, sum, touch, and more
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他有用的命令，如stat、sum、touch等
- en: Introduction
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: You can think of everything in a Linux filesystem as a stream of bytes. This
    is simply called a file. A directory is also a file that contains other files.
    Most of the files are located on your computer's hard disk. However, some are
    in memory, for example, `/proc` and `/sys` are actually virtual filesystems. Files
    can also be stored on removable media too such as USB devices, CD/DVDs, and on
    other machines (that is, NFS mounts).
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以将Linux文件系统中的所有内容视为字节流。这简单地称为文件。目录也是一个包含其他文件的文件。大多数文件位于计算机的硬盘上。但是，有些文件位于内存中，例如`/proc`和`/sys`实际上是虚拟文件系统。文件也可以存储在可移动介质上，例如USB设备、CD/DVD和其他机器上（即NFS挂载）。
- en: Understanding inodes and the superblock
  id: totrans-11
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 理解inode和超级块
- en: 'Every file under a filesystem has a special number called an **inode**. The
    inode is where the OS stores the properties of the file and contains the following
    information:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 文件系统中的每个文件都有一个称为**inode**的特殊编号。inode是操作系统存储文件属性的地方，并包含以下信息：
- en: The file type such as regular, directory, special, link, socket, pipe, or block
    device
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文件类型，如常规、目录、特殊、链接、套接字、管道或块设备
- en: The owner and group information
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有者和组信息
- en: The permissions of the file (more on this in [Chapter 5](ch05.html "Chapter 5. Permissions,
    Access, and Security"), *Permissions, Access, and Security*)
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文件的权限（更多信息请参见[第5章](ch05.html "第5章。权限、访问和安全性")，*权限、访问和安全性*）
- en: Date and time on which the file was created and when last changed or read
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文件创建的日期和时间以及最后更改或读取的时间
- en: The file size
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文件大小
- en: The inode contains some other information as well
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: inode还包含一些其他信息
- en: Things that are not available in the inode are the full path and name of the
    file itself. This is stored in the `/proc` filesystem under the **PID** (**process
    ID**) of the process that owns the file.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在inode中不可用的内容是文件本身的完整路径和名称。这些信息存储在`/proc`文件系统下的进程ID（PID）拥有文件的进程下。
- en: The **superblock** is what ties all of the inodes together on a filesystem.
    It contains all of the information needed to manage the files. Being very important
    to the system, most Linux filesystems have a backup copy of the superblock at
    regular intervals, while also being retained in memory.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '**超级块**是将文件系统上的所有inode联系在一起的东西。它包含管理文件所需的所有信息。对于系统非常重要，大多数Linux文件系统都定期备份超级块的副本，同时也保留在内存中。'
- en: 'The `dumpe2fs` command can be used to show the contents of the superblock.
    The following is a screenshot of `dumpe2fs` taken on Fedora 17:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '`dumpe2fs`命令可用于显示超级块的内容。以下是在Fedora 17上使用`dumpe2fs`的屏幕截图：'
- en: '![Understanding inodes and the superblock](img/3008OS_03_00.jpg)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![理解inode和超级块](img/3008OS_03_00.jpg)'
- en: This shows the superblock information for the first partition on this hard drive.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 这显示了这个硬盘上第一个分区的超级块信息。
- en: Copying, removing, and updating files and directories
  id: totrans-24
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 复制、删除和更新文件和目录
- en: In this section we will briefly explore how to copy, remove, and update files.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将简要探讨如何复制、删除和更新文件。
- en: Getting ready
  id: totrans-26
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备好
- en: Several books have been written about filesystem management, and so this will
    serve as just a brief overview. If you have a Linux machine available you can
    try out these commands. We will be doing everything in the `/tmp` filesystem,
    so you don't have to worry about messing anything up on your system.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 有几本关于文件系统管理的书已经出版，因此这将作为一个简要概述。如果您有一台Linux机器可用，可以尝试这些命令。我们将在`/tmp`文件系统中进行所有操作，因此您不必担心在系统上搞砸任何东西。
- en: How to do it...
  id: totrans-28
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'The following is the method to create some files and directories:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是创建一些文件和目录的方法：
- en: 'Go to the `/tmp` directory:'
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到`/tmp`目录：
- en: '[PRE0]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Make a test directory:'
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个测试目录：
- en: '[PRE1]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Go to the directory:'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到目录：
- en: '[PRE2]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Let''s create some files:'
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们创建一些文件：
- en: '[PRE3]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Also, create some directories:'
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 还要创建一些目录：
- en: '[PRE4]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: The syntax for copy is `cp source-file destination-file`, so now run `cp f1
    f5`. This will create file `f5` which is a copy of file `f1`.
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 复制的语法是`cp源文件目标文件`，现在运行`cp f1 f5`。这将创建文件`f5`，它是文件`f1`的副本。
- en: 'You can copy to a directory:'
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以复制到一个目录：
- en: '[PRE5]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'The above is a relative path, because it starts from the current directory.
    To use an absolute path do this:'
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 上面是相对路径，因为它从当前目录开始。要使用绝对路径，请执行以下操作：
- en: '[PRE6]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Now let''s remove file `f3` from the current directory:'
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在让我们从当前目录中删除文件`f3`：
- en: '[PRE7]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Let''s move file `f2` to `dir2`:'
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们将文件`f2`移动到`dir2`：
- en: '[PRE8]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'The `mv` command is also used to rename a file. To rename `f1` to `f6`:'
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`mv`命令也用于重命名文件。将`f1`重命名为`f6`：'
- en: '[PRE9]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'To see a text mode graphical representation of this directory run the following
    command:'
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要查看此目录的文本模式图形表示，请运行以下命令：
- en: '[PRE10]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'It is optional to clean up everything we just did, `cd /tmp` and then run:'
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 清理我们刚刚做的一切是可选的，`cd /tmp`然后运行：
- en: '[PRE11]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'The following is a screenshot of the above commands:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是上述命令的屏幕截图：
- en: '![How to do it...](img/3008OS_03_01.jpg)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![如何做...](img/3008OS_03_01.jpg)'
- en: There's more...
  id: totrans-57
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'A file can be copied from another location on your computer to the current
    directory. This is performed using the dot operator:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 可以将文件从计算机上的另一个位置复制到当前目录。这是使用点运算符执行的：
- en: '[PRE12]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'You don''t have to `cd` to a directory first. You can do something like the
    following command:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 您不必首先`cd`到目录。您可以执行以下命令：
- en: '[PRE13]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: This is very handy, especially when configuring a machine.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 这非常方便，特别是在配置机器时。
- en: So what happens if you copy a file to a file that already exists? Assuming you
    have the proper permissions, the file being copied overwrites the other file.
    Also, be careful when using `rm`, as it is very difficult to recover a deleted
    file on a Linux system.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 那么如果你将一个文件复制到已经存在的文件会发生什么呢？假设你有适当的权限，被复制的文件会覆盖另一个文件。此外，在Linux系统上使用`rm`时要小心，因为很难恢复已删除的文件。
- en: Finding files using find and locate
  id: totrans-64
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用find和locate查找文件
- en: The `find` command is normally used to search for files starting from the current
    directory. The `locate` command uses the `updatedb` database to find files or
    directories on the entire system (with some exceptions).
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: '`find`命令通常用于从当前目录开始搜索文件。`locate`命令使用`updatedb`数据库在整个系统（有一些例外）中查找文件或目录。'
- en: How to do it...
  id: totrans-66
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Let''s use `find` and `locate` to look for some common Linux files:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们使用`find`和`locate`来查找一些常见的Linux文件：
- en: 'First change the directory to `/usr`:'
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先将目录更改为`/usr`：
- en: '[PRE14]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Run the following command:'
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下命令：
- en: '[PRE15]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Now try it with a wildcard:'
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在尝试使用通配符：
- en: '[PRE16]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'It will also find directories:'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它也会找到目录：
- en: '[PRE17]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Now suppose we want to look for a file, but don't really know where it might
    be on the system. The `find` command is also slow at times, because it has to
    search the filesystem from the current point. Here's where `locate` comes in real
    handy.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 现在假设我们想要查找一个文件，但实际上不知道它可能在系统的哪个位置。`find`命令有时也很慢，因为它必须从当前点搜索文件系统。这就是`locate`非常方便的地方。
- en: 'You can be in any directory for this example. Run the following command:'
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这个例子中，你可以在任何目录中。运行以下命令：
- en: '[PRE18]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Now try the command:'
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在尝试命令：
- en: '[PRE19]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'See how fast this is? Now try:'
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 看看这有多快？现在尝试：
- en: '[PRE20]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'To ignore case do:'
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要忽略大小写，请执行：
- en: '[PRE21]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: There's more...
  id: totrans-85
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: The `find` command has over 100 parameters; consult the man page for more information.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: '`find`命令有100多个参数；请参考man页面获取更多信息。'
- en: The `locate` command uses a database(s) to store the location of files. This
    database is usually automatically recreated by a cron job every night. If you
    want to refresh the database immediately run the `updatedb` command. Note that
    it may take a while on a large filesystem and/or slow computer.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: '`locate`命令使用数据库来存储文件的位置。这个数据库通常会在每天晚上由一个cron作业自动重新创建。如果你想立即刷新数据库，请运行`updatedb`命令。请注意，在大型文件系统和/或慢速计算机上可能需要一段时间。'
- en: Creating text files – vim, Emacs, and others
  id: totrans-88
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建文本文件 - vim，Emacs和其他编辑器
- en: Most users are probably familiar with a GUI-based word processing program. For
    example, I am using LibreOffice Writer to compose this book. However, you can
    edit files using the command line as well. Some of us even prefer it.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数用户可能熟悉基于GUI的文字处理程序。例如，我正在使用LibreOffice Writer来撰写这本书。但是，你也可以使用命令行来编辑文件。我们中的一些人甚至更喜欢这样做。
- en: Getting ready
  id: totrans-90
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备好
- en: It is assumed the reader has access to a Linux machine with a selection of text
    editors available. We will start with **vim**, a text editor that is available
    on every Linux/Unix system. If **Emacs** is not on your system, try installing
    it with `yum install emacs` or `apt-get install emacs`.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 假设读者可以访问带有各种文本编辑器的Linux机器。我们将从**vim**开始，这是每个Linux/Unix系统上都有的文本编辑器。如果你的系统上没有**Emacs**，请尝试使用`yum
    install emacs`或`apt-get install emacs`进行安装。
- en: How to do it...
  id: totrans-92
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'The following is the method to create and edit a text file using the `vi` command:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是使用`vi`命令创建和编辑文本文件的方法：
- en: 'Let''s go to the `tmp` directory. Run the following command:'
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们去`tmp`目录。运行以下命令：
- en: '[PRE22]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'Now run:'
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在运行：
- en: '[PRE23]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: Your terminal should have cleared with vim running in it. Vim is modeless, and
    so always has to be told what mode to be in. Press the *A* key.
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你的终端应该已经清空，vim正在其中运行。Vim是无模式的，所以总是必须告诉它要处于什么模式。按*A*键。
- en: Vim should now be in Insert mode. You may see something like `-- INSERT --`
    at the bottom of the screen. Now type some characters.
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在Vim应该处于插入模式。你可能会在屏幕底部看到类似`-- INSERT --`的东西。现在输入一些字符。
- en: The normal cursor control keys should be functional. When done editing, press
    the *Esc* key to get out of Insert mode.
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 正常的光标控制键应该是有效的。编辑完成后，按*Esc*键退出插入模式。
- en: To enter command mode, press the colon key, and then any letter. To save the
    file for example type `:w`.
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要进入命令模式，请按冒号键，然后输入任何字母。例如，要保存文件，请输入`:w`。
- en: To save the file and then quit vim, press *Esc* and then type `:wq`.
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要保存文件然后退出vim，请按*Esc*，然后输入`:wq`。
- en: 'The following is a screenshot of vim editing a Java file:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是vim编辑Java文件的屏幕截图：
- en: '![How to do it...](img/3008OS_03_02_new.jpg)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![如何做...](img/3008OS_03_02_new.jpg)'
- en: 'Now let''s take a look at the Emacs editor:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们来看看Emacs编辑器：
- en: 'Change to the `/tmp` directory:'
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 切换到`/tmp`目录：
- en: '[PRE24]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'To start Emacs in text mode run:'
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要以文本模式启动Emacs，请按：
- en: '[PRE25]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: It will start up in edit mode. Type a few lines
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它将以编辑模式启动。输入几行
- en: To save the file, press *Ctrl* + *C* and then press *Ctrl* + *S*.
  id: totrans-111
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要保存文件，请按*Ctrl* + *C*，然后按*Ctrl* + *S*。
- en: The standard cursor keys should get you around the screen; try it.
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 标准光标键应该可以让你在屏幕上移动；试试看。
- en: Press *Ctrl*+*H*+*?* to bring up the **Help** window.
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按*Ctrl*+*H*+*?*打开**帮助**窗口。
- en: To go back to your original screen, press *Ctrl*+*X*+*1*.
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要返回到原始屏幕，按*Ctrl*+*X*+*1*。
- en: To close the Emacs session, press *Ctrl* + *X* and then press *Ctrl* + *C*.
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要关闭Emacs会话，请按*Ctrl* + *X*，然后按*Ctrl* + *C*。
- en: 'The following is a screenshot of Emacs editing the Java file:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是Emacs编辑Java文件的屏幕截图：
- en: '![How to do it...](img/3008OS_03_03.jpg)'
  id: totrans-117
  prefs: []
  type: TYPE_IMG
  zh: '![如何做...](img/3008OS_03_03.jpg)'
- en: There's more...
  id: totrans-118
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Vim and Emacs are very powerful editors. They are most often used by programmers
    writing code and sys admins maintaining shell scripts. To get more information
    consult the man and/or info pages, or their websites.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: Vim和Emacs是非常强大的编辑器。它们通常被程序员用来编写代码，系统管理员用来维护shell脚本。要获取更多信息，请参考man和/或info页面，或者它们的网站。
- en: 'And for a bonus, here''s a picture of my personally-written text editor:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 作为奖励，这是我个人编写的文本编辑器的图片：
- en: '![There''s more...](img/3008OS_03_04.jpg)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![还有更多...](img/3008OS_03_04.jpg)'
- en: This was written in C language under DOS about 20 years ago. I have now compiled
    and run it on over 20 different platforms.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 这是20年前在DOS下用C语言编写的。我现在已经在20多个不同的平台上编译和运行了它。
- en: Using the file command
  id: totrans-123
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用file命令
- en: We talked about text files above. In general, humans can read and edit text
    files rather easily. A binary file is different, it is (loosely) what the computer
    "reads". For example, when you run a command such as `vim filename1.txt` vim is
    a binary file and `filename1.txt` is a text file.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 我们上面讨论了文本文件。一般来说，人类可以很容易地阅读和编辑文本文件。二进制文件是不同的，它是（宽泛地说）计算机“读取”的内容。例如，当您运行`vim
    filename1.txt`这样的命令时，vim是一个二进制文件，`filename1.txt`是一个文本文件。
- en: How to do it...
  id: totrans-125
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'The following is an example of running the Linux `file` command:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是运行Linux `file`命令的示例：
- en: 'Change the directory to `/tmp` as usual:'
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将目录更改为`/tmp`，与往常一样：
- en: '[PRE26]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'Let''s create a text file:'
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们创建一个文本文件：
- en: '[PRE27]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'What kind of file is it? Run the following command:'
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它是什么类型的文件？运行以下命令：
- en: '[PRE28]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: As you can see, the `file` command can tell us what kind of file something is.
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 正如您所看到的，`file`命令可以告诉我们某个文件是什么类型。
- en: 'Now run the following command:'
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在运行以下命令：
- en: '[PRE29]'
  id: totrans-135
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: All of that information means it's a binary file. It also shows what platform
    bash was written for, and some other info.
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 所有这些信息都意味着它是一个二进制文件。它还显示了bash是为哪个平台编写的，以及其他一些信息。
- en: Try running file on some different files on your system to get an idea of what
    there is out there.
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 尝试在系统上运行文件以了解那里有什么。
- en: Tip
  id: totrans-138
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: You must have the proper permissions to run the `file` command as it must perform
    an open operation on the file.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 您必须具有适当的权限才能运行`file`命令，因为它必须对文件执行打开操作。
- en: There's more...
  id: totrans-140
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'We mentioned editing text files. Binary files can be edited as well, if you
    really know what you are doing. This is sometimes needed during low-level work,
    for example, when working on device drivers. A binary editor may look something
    like the following screenshot:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 我们提到了编辑文本文件。如果您真的知道自己在做什么，二进制文件也可以编辑。有时在低级工作中，例如在设备驱动程序上工作时，这是必要的。二进制编辑器可能看起来像以下的截图：
- en: '![There''s more...](img/3008OS_03_06.jpg)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![还有更多...](img/3008OS_03_06.jpg)'
- en: Tip
  id: totrans-143
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: '**Oh no, I have edited a file but now can''t save it!**'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: '**哦不，我已经编辑了一个文件，但现在无法保存它！**'
- en: From time to time, you may get into a text editing situation that seems hopeless.
    You have spent some time changing a file but now can't save it. The error is usually
    something like "Permission denied". There are usually two things that can cause
    this; you can't write into the directory where the file is located, or the file
    already exists but not with the proper writeable permissions. The best way to
    save your work, if the program allows it, is to simply write the file somewhere
    else, for example, in `/tmp`.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 偶尔，您可能会陷入一个看似无望的文本编辑情况。您已经花了一些时间更改一个文件，但现在无法保存它。错误通常是“权限被拒绝”。通常有两件事可能会导致这种情况；您无法写入文件所在的目录，或者文件已经存在但没有适当的可写权限。如果程序允许，保存您的工作的最佳方法是将文件简单地写入其他地方，例如`/tmp`。
- en: This is a rather simplistic example, but it gets the idea across. I wish I had
    already known this procedure the first time it happened to me.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个相当简单的例子，但它传达了这个想法。我希望第一次发生这种情况时我已经知道这个程序。
- en: How to do it...
  id: totrans-147
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'The following is the method to save a file when you get a permission error:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是在出现权限错误时保存文件的方法：
- en: 'As a normal user (not root) go to the `/usr` directory:'
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 作为普通用户（而不是root）转到`/usr`目录：
- en: '[PRE30]'
  id: totrans-150
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'Now run the following command:'
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在运行以下命令：
- en: '[PRE31]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: It should open up an empty file as normal. Press *A* and then then enter some
    text.
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它应该像平常一样打开一个空文件。按*A*，然后输入一些文本。
- en: Now press *Esc*, and type `:w`.
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在按*Esc*，然后输入`:w`。
- en: 'It should show a write error, so save the file to `/tmp`:'
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它应该显示一个写入错误，所以将文件保存到`/tmp`：
- en: '[PRE32]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: That should succeed. You can then take steps to correct the real problem (that
    is, don't edit files where you are not supposed to!).
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 那应该成功。然后您可以采取措施来纠正真正的问题（也就是说，不要在不应该编辑文件的地方编辑文件！）。
- en: Using grep to find patterns
  id: totrans-158
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用grep查找模式
- en: When dealing with files, it is convenient to be able to search for patterns
    within the text. This is often used in code development for example. Here we show
    how to use **grep**.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 处理文件时，能够在文本中搜索模式是很方便的。这在代码开发中经常使用。这里我们展示如何使用**grep**。
- en: Getting ready
  id: totrans-160
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: We will use the `dmesg` program, which shows information about the running kernel,
    for this example. If it is not available, or if your computer has been running
    for a long time, the following may not match up quite right on your system.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用`dmesg`程序来显示有关运行内核的信息。如果它不可用，或者如果您的计算机已经运行了很长时间，那么以下内容可能不会完全匹配您的系统。
- en: How to do it...
  id: totrans-162
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'The following is an example on using `grep`:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是使用`grep`的示例：
- en: 'Run the following command:'
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下命令：
- en: '[PRE33]'
  id: totrans-165
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'Use `dmesg` to create a file, so we can search for some information about your
    system:'
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`dmesg`创建一个文件，这样我们就可以搜索一些关于您的系统的信息：
- en: '[PRE34]'
  id: totrans-167
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'Let''s see if we can determine what network device is being used. Run:'
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们看看能否确定正在使用哪个网络设备。运行：
- en: '[PRE35]'
  id: totrans-169
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'The output might not be very informative. But what if case is an issue? Try
    the following command:'
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输出可能不是很有信息性。但如果大小写有问题怎么办？尝试以下命令：
- en: '[PRE36]'
  id: totrans-171
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'The `-i` tells `grep` to ignore case. You should now see which network driver
    your system is using. Now try the following command:'
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`-i`告诉`grep`忽略大小写。现在您应该看到您的系统正在使用哪个网络驱动程序。现在尝试以下命令：'
- en: '[PRE37]'
  id: totrans-173
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: '`grep` returns a code based on the results of the search. Run the above command
    again (remember the up arrow shortcut?):'
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`grep`返回一个基于搜索结果的代码。再次运行上面的命令（记住上箭头快捷键吗？）：'
- en: '[PRE38]'
  id: totrans-175
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'Now run the following command:'
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在运行以下命令：
- en: '[PRE39]'
  id: totrans-177
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: 'Assuming the text was found, the return code will be `0`. Now search for a
    string that should not be there:'
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 假设找到了文本，返回代码将为`0`。现在搜索一个不应该存在的字符串：
- en: '[PRE40]'
  id: totrans-179
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: 'Run the following command:'
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下命令：
- en: '[PRE41]'
  id: totrans-181
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: The return code should not be `0`.
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 返回代码不应为`0`。
- en: Tip
  id: totrans-183
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: This might seem a little backwards, that zero means success and non-zero means
    failure. This is common to many Linux commands, because in many cases the number
    returned is an error code.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 这可能看起来有点反常，0表示成功，非零表示失败。这对许多Linux命令都是常见的，因为在许多情况下返回的数字是错误代码。
- en: There's more...
  id: totrans-185
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: The `grep` program can search in an incredible amount of different ways. You
    can specify very complicated patterns as well. Consult the man page for more information.
    Also, we will visit the return code from `grep` again in [Chapter 8](ch08.html
    "Chapter 8. Working with Scripts"), *Working with Scripts*.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: '`grep`程序可以以令人难以置信的多种方式进行搜索。您还可以指定非常复杂的模式。有关更多信息，请参阅man页面。此外，我们将在[第8章](ch08.html
    "第8章。使用脚本")中再次讨论`grep`的返回代码，*使用脚本*。'
- en: Compressing files using ZIP and TAR
  id: totrans-187
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用ZIP和TAR压缩文件
- en: It's no secret that a Linux system has a *lot* of files. A typical code development
    project might have over 1000 files, spread across several directories. And how
    do we back all of that stuff up?
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 毫无疑问，Linux系统有*大量*的文件。一个典型的代码开发项目可能有1000多个文件，分布在几个目录中。我们如何备份所有这些东西？
- en: The answer is file packaging and compression. Here we will show two favorites,
    **ZIP** and **TAR**.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 答案是文件打包和压缩。这里我们将展示两个最喜欢的，**ZIP**和**TAR**。
- en: Getting ready
  id: totrans-190
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Most Linux systems have both ZIP and TAR, and so it will be assumed they are
    already available on your system.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数Linux系统都有ZIP和TAR，因此可以假定它们已经在您的系统上可用。
- en: How to do it...
  id: totrans-192
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Here we will experiment with the `zip` and `unzip` command::'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们将尝试`zip`和`unzip`命令：
- en: 'Run the following command:'
  id: totrans-194
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下命令：
- en: '[PRE42]'
  id: totrans-195
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: 'Let''s make a temporary directory:'
  id: totrans-196
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们创建一个临时目录：
- en: '[PRE43]'
  id: totrans-197
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: 'Run the following command:'
  id: totrans-198
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下命令：
- en: '[PRE44]'
  id: totrans-199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'Now let''s create some files:'
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在让我们创建一些文件：
- en: '[PRE45]'
  id: totrans-201
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: 'Then, create some more files:'
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，创建一些更多的文件：
- en: '[PRE46]'
  id: totrans-203
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'Let''s package and compress the first ones into a single file:'
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们将前面的文件打包和压缩成一个文件：
- en: '[PRE47]'
  id: totrans-205
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'As you can see, the syntax for ZIP is "zip zipped-file files-to-zip". We could
    have also used wildcards above:'
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 正如您所看到的，ZIP的语法是“zip zipped-file files-to-zip”。我们也可以在上面使用通配符：
- en: '[PRE48]'
  id: totrans-207
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: 'Now let''s include the others:'
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在让我们包括其他文件：
- en: '[PRE49]'
  id: totrans-209
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: 'The unzip program is used to extract files out of a zipped file (also called
    an archive). Make another directory using the command:'
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: unzip程序用于从压缩文件（也称为存档）中提取文件。使用以下命令创建另一个目录：
- en: '[PRE50]'
  id: totrans-211
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: 'Run the following command:'
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下命令：
- en: '[PRE51]'
  id: totrans-213
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: 'Run the following command:'
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下命令：
- en: '[PRE52]'
  id: totrans-215
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: 'Now unzip the file:'
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在解压文件：
- en: '[PRE53]'
  id: totrans-217
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: Perform an `ls -la` command. You should see the files as before.
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行`ls -la`命令。您应该像以前一样看到文件。
- en: 'You can also view the contents of a ZIP file, without extracting anything,
    by running the following command:'
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您还可以查看ZIP文件的内容，而无需提取任何内容，只需运行以下命令：
- en: '[PRE54]'
  id: totrans-220
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: 'I use ZIP when there are just a few files, or when I am sending them to someone
    running a non-Linux OS. While ZIP can be used to span directories, it doesn''t
    normally deal well with some Linux files. Tar is a better alternative:'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 当只有少量文件时，或者当我将它们发送给运行非Linux操作系统的人时，我使用ZIP。虽然ZIP可以用于跨目录，但通常无法很好地处理一些Linux文件。Tar是一个更好的选择：
- en: 'We can use the same files as before: cd /tmp/lbooktemp'
  id: totrans-222
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们可以使用与之前相同的文件：cd /tmp/lbooktemp
- en: Run `tar cvzf lbook1.tar.gz *.txt`. This will create a gzip compressed archive
    file.
  id: totrans-223
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行`tar cvzf lbook1.tar.gz *.txt`。这将创建一个gzip压缩的存档文件。
- en: 'Now run `file lbook1.tar.gz`. It should show something like the following output:'
  id: totrans-224
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在运行`file lbook1.tar.gz`。它应该显示类似以下的输出：
- en: '[PRE55]'
  id: totrans-225
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: 'To extract, first copy it to the test directory:'
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要提取，首先将其复制到测试目录：
- en: '[PRE56]'
  id: totrans-227
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: 'Run the following command:'
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下命令：
- en: '[PRE57]'
  id: totrans-229
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: 'Run the following command:'
  id: totrans-230
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下命令：
- en: '[PRE58]'
  id: totrans-231
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: Perform an `ls -la` command. You should see the files again.
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行`ls -la`命令。您应该再次看到文件。
- en: 'To view a tar archive, use the `t` (for tell) option:'
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要查看tar存档，请使用`t`（用于告诉）选项：
- en: '[PRE59]'
  id: totrans-234
  prefs: []
  type: TYPE_PRE
  zh: '[PRE59]'
- en: 'Now let''s TAR the the whole directory:'
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在让我们将整个目录打包成TAR：
- en: '[PRE60]'
  id: totrans-236
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: 'Run the following command:'
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下命令：
- en: '[PRE61]'
  id: totrans-238
  prefs: []
  type: TYPE_PRE
  zh: '[PRE61]'
- en: This will get the entire directory, even the hidden files if any exist.
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这将获取整个目录，甚至包括任何隐藏文件。
- en: 'The following is a screenshot of the `zip` command:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是`zip`命令的屏幕截图：
- en: '![How to do it...](img/3008OS_03_07.jpg)'
  id: totrans-241
  prefs: []
  type: TYPE_IMG
  zh: '![如何做...](img/3008OS_03_07.jpg)'
- en: There's more...
  id: totrans-242
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: ZIP and TAR are used quite frequently in system administration to back up everything.
    It should be noted that "tarring up" a system, copying that file to another machine,
    and "untarring" the file is a great way to clone a box (I use this all the time).
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: ZIP和TAR在系统管理中经常用于备份所有内容。需要注意的是，“打包”系统，将该文件复制到另一台机器，并“解包”文件是克隆一个盒子的好方法（我经常使用这个）。
- en: Later, when we discuss crontab in [Chapter 9](ch09.html "Chapter 9. Automating
    Tasks Using Cron"), *Automating Tasks Using Cron*, I will show how I use TAR to
    backup my system every night.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 稍后，当我们在[第9章](ch09.html "第9章。使用Cron自动化任务")中讨论crontab时，*使用Cron自动化任务*，我将展示如何使用TAR每晚备份我的系统。
- en: Other helpful commands such as stat, sum, touch, and more
  id: totrans-245
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 其他有用的命令，如stat、sum、touch等
- en: There are many more commands available in Linux that deal with files. In this
    section I show how to use a few of them.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: Linux中有许多处理文件的命令。在本节中，我展示了如何使用其中一些。
- en: How to do it...
  id: totrans-247
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'The following are some of the commands I find myself using all the time:'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是我经常使用的一些命令：
- en: 'Run the following command:'
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下命令：
- en: '[PRE62]'
  id: totrans-250
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: 'Create a file:'
  id: totrans-251
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个文件：
- en: '[PRE63]'
  id: totrans-252
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: Now run `ls -la` and remember the info. We will use this later.
  id: totrans-253
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在运行`ls -la`并记住信息。我们稍后会用到这个。
- en: 'Use the `stat` command to see practically everything you would ever want to
    know about the file:'
  id: totrans-254
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`stat`命令可以查看关于文件的几乎所有你想知道的信息：
- en: '[PRE64]'
  id: totrans-255
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: 'Now suppose you have sent that file to someone that is running a Linux system,
    and want to ensure it did not get corrupted along the way. Run the following command:'
  id: totrans-256
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在假设您已将该文件发送给正在运行Linux系统的人，并希望确保它在传输过程中没有损坏。运行以下命令：
- en: '[PRE65]'
  id: totrans-257
  prefs: []
  type: TYPE_PRE
  zh: '[PRE65]'
- en: The first number is the checksum and the second is the number of blocks for
    that file. If the other person runs `sum` on his copy of the file and sees the
    same info, the files are the same.
  id: totrans-258
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一个数字是校验和，第二个是该文件的块数。如果其他人在他的文件副本上运行`sum`并看到相同的信息，那么这些文件是相同的。
- en: Tip
  id: totrans-259
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: The file names do not have to match.
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 文件名不必匹配。
- en: 'We have created a lot of files by using the redirection operator. You can also
    use the touch command:'
  id: totrans-261
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们通过使用重定向运算符创建了许多文件。您还可以使用touch命令：
- en: '[PRE66]'
  id: totrans-262
  prefs: []
  type: TYPE_PRE
  zh: '[PRE66]'
- en: 'Since `file2.txt` did not already exist, touch will create it as an empty file.
    In fact, let''s prove that:'
  id: totrans-263
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于`file2.txt`之前不存在，touch将创建一个空文件。事实上，让我们证明一下：
- en: '[PRE67]'
  id: totrans-264
  prefs: []
  type: TYPE_PRE
  zh: '[PRE67]'
- en: 'So what happens if we run touch on an existing file? Does it empty it? No,
    it updates the time and date on it. Run the following command:'
  id: totrans-265
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 那么，如果我们在现有文件上运行touch会发生什么？它会清空它吗？不会，它会更新文件的时间和日期。运行以下命令：
- en: '[PRE68]'
  id: totrans-266
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: 'Now run the following command:'
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在运行以下命令：
- en: '[PRE69]'
  id: totrans-268
  prefs: []
  type: TYPE_PRE
  zh: '[PRE69]'
- en: Run `ls -la` again. You should notice it now shows the current date and time
    on that file.
  id: totrans-269
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 再次运行`ls -la`。你应该注意到它现在显示了该文件的当前日期和时间。
- en: 'Suppose you want to just view a text file. Run the following command:'
  id: totrans-270
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 假设你只想查看一个文本文件。运行以下命令：
- en: '[PRE70]'
  id: totrans-271
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: When using the `less` command press the Space bar to scroll down. Press *Q*
    to exit.
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`less`命令时按空格键向下滚动。按*Q*退出。
- en: 'Say we want to see just the first few lines in that file:'
  id: totrans-273
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 假设我们只想看到该文件的前几行：
- en: '[PRE71]'
  id: totrans-274
  prefs: []
  type: TYPE_PRE
  zh: '[PRE71]'
- en: 'The `head` command shows the first 10 lines by default. How about the last
    10 lines? Run the following command:'
  id: totrans-275
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`head`命令默认显示前10行。那么最后10行呢？运行以下命令：'
- en: '[PRE72]'
  id: totrans-276
  prefs: []
  type: TYPE_PRE
  zh: '[PRE72]'
- en: There's more...
  id: totrans-277
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: As I have said before, there are many, many more commands that deal with files.
    And, of the commands I have mentioned, I have only scratched the surface of what
    they can do. As always, consult the man pages for more information.
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我之前所说，有许多其他处理文件的命令。而且，我提到的命令只是它们所能做的冰山一角。如常，查阅man手册以获取更多信息。
