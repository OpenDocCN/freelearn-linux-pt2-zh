# 前言

本书是备受好评的《CentOS Linux 服务器食谱》的第二版。随着 2014 年年中 CentOS 7 的推出，这个著名的操作系统迎来了一系列重大变化和新特性。例如，新的安装程序、系统管理服务套件、防火墙守护进程、增强的 Linux 容器支持以及新的标准文件系统。由于操作系统的新进展，《CentOS 6 Linux 服务器食谱》中很大一部分的食谱变得过时甚至无法使用，因此更新本书的原始内容至关重要。但本书不仅仅是第一版内容的复习：还新增了两章，以跟上最新的开源技术并提供更好的安全性：操作系统级虚拟化和 SELinux。最后，为了使本书成为更全面的服务器管理书籍，还增加了一章关于服务器监控的内容。

构建服务器可能会带来挑战。在最好的情况下也常常是困难的，在最坏的情况下则是令人沮丧的。它们可能代表最大的问题，也可能给你带来极大的自豪和成就感。尽管“服务器”这个词可以描述很多事物，但本书的目的是揭开企业级计算系统的神秘面纱，旨在帮助你构建你选择的专业服务器解决方案。CentOS 是一个基于社区的企业级操作系统。它是免费提供的，并且作为 Red Hat Enterprise Linux（RHEL）的完全兼容衍生版本，它是全球组织、公司、专业人士和家庭用户打算运行服务器的首选操作系统。它被广泛认为是一个非常强大和灵活的 Linux 发行版，无论你打算运行 Web 服务器、文件服务器、FTP 服务器、域服务器还是多角色解决方案，本书的目的都是提供一系列即用型解决方案，展示你如何快速使用 CentOS 操作系统构建一个功能全面的服务器系统。因此，可以说这本书不仅仅是对另一个基于服务器的操作系统的又一次介绍。这是一本关于企业级操作系统的食谱，提供了一种逐步使其工作的方法。因此，无论你是新手还是经验丰富的用户，每个人都能在这本书中找到有用的内容，因为这本书将成为你完成任务的实用指南，也是所有 CentOS 事物的起点。

# 本书内容概述

第一章，*安装 CentOS*，是一系列介绍您安装服务器任务的配方，更新，并通过添加额外工具来增强最小安装。它旨在让您开始，并提供一个参考，向您展示实现所需安装的多种方式。

第二章，*配置系统*，旨在在成功安装后提供帮助，并为您提供一系列配方，使您能够实现所需的服务器初始配置。从向您展示如何处理文本文件，然后更改语言和时间日期设置，您不仅将学习如何配置网络设置，还将学习如何解析完全限定域名以及如何使用内核模块。

第三章，*管理系统*，提供了构建块，使您能够掌握您的服务器并控制您的环境。在这里，您将通过传播大量信息来启动您作为服务器管理员的角色，这些信息将引导您完成开发全面考虑和专业服务器解决方案所需的多种步骤。

第四章，*使用 YUM 管理软件包*，旨在向您介绍在 CentOS 7 上使用软件包的工作。从升级系统到查找、安装、卸载以及通过添加额外的仓库来增强系统，本章的目的是解释开源命令行包管理工具，即 Yellowdog Updater Modified（YUM）以及 RPM 包管理器。

第五章，*管理文件系统*，专注于与服务器文件系统的工作。从创建模拟磁盘设备以测试概念到高级格式化和分区命令，您将学习如何使用逻辑卷管理器，维护文件系统以及使用磁盘配额。

第六章，*提供安全性*，讨论了实施一系列解决方案的必要性，这些解决方案将提供您运行成功服务器解决方案所需级别的保护。从保护您的 ssh 和 FTP 服务，到了解新的 firewalld 管理器和创建证书，您将看到构建一个不仅考虑减少外部攻击风险，而且为您的用户提供额外保护的服务器是多么容易。

第七章，*构建网络*，解释了在您的网络计算机中实现各种形式的资源共享所需的步骤。从 IP 地址和打印设备到各种形式的文件共享协议，无论您是打算支持家庭网络还是完整的商业环境，本章在任何服务器中都扮演着至关重要的角色。

第八章，*使用 FTP*，专注于 VSFTP 的角色，并提供了一系列的食谱，将为您提供所需的指导，以在 CentOS 7 服务器上安装、配置和管理您想要提供的文件传输协议（FTP）。

第九章，*使用域名*，考虑了在 CentOS 7 服务器上实施域名、域名解析和 DNS 查询所需的步骤。域名系统在任何服务器中都扮演着至关重要的角色，无论您是打算支持家庭网络还是完整的商业环境，本章的目的是提供一系列的解决方案，将为您提供一个未来证明的解决方案的开始。

第十章，*使用数据库*，提供了一系列的食谱，旨在解释在 CentOS 7 服务器上部署 MySQL 和 PostgreSQL 所需的必要步骤。

第十一章，*提供邮件服务*，向您介绍如何为您的 CentOS 7 服务器启用域范围内的邮件传输代理。从构建本地 POP3/SMTP 服务器到配置 Fetchmail，本章的目的是为您的所有未来基于电子邮件的需求提供基础。

第十二章，*提供 Web 服务*，深入研究了著名的 Apache 服务器技术的角色，无论您是打算运行开发服务器还是实时生产服务器，本章都为您提供了必要的步骤，以提供您成为基于 Web 的发布解决方案大师所需的功能。

第十三章，*操作系统级虚拟化*，向您介绍使用最先进的开源平台 Docker 的 Linux 容器世界，并指导您构建、运行和共享您的第一个 Docker 镜像。

第十四章，*使用 SELinux*，有助于理解和解开 CentOS 7 中最不为人知的话题之一——安全增强型 Linux 的神秘面纱。

第十五章，*监控 IT 基础设施*，介绍并展示了如何设置 Nagios Core，这是监控整个 IT 基础设施的行业标准。

# 本书所需

本书的要求相对简单，首先是需要下载 CentOS 操作系统。该软件是免费的，但你需要一台能够充当服务器的计算机，一些免费的安装介质（空白 CD-R/DVD-R 或 USB 设备），互联网连接，一些空闲时间，以及享受乐趣的愿望。

话虽如此，许多读者都会意识到，你不需要一台备用计算机来利用这本书，因为始终可以选择在虚拟化软件上安装 CentOS。这种方法非常常见，在这些页面中包含的食谱仍然适用的情况下，你应该知道本书不考虑使用虚拟化软件。因此，任何关于使用该软件的支持请求都应直接向相应的供应商提出。

# 本书适合谁

这是一本关于构建服务器解决方案的实用指南，而不是关于 CentOS 本身。本书将向你展示如何让 CentOS 运行起来。它是一本为初学者到中级 Linux 用户编写的书，他们打算将 CentOS 作为下一个服务器的基础。但是，如果你对整个操作系统还不熟悉，那么不用担心；本书还将为你提供构建完整服务器解决方案所需的逐步方法，并附带许多行业技巧。

# 章节

在本书中，你会发现一些频繁出现的标题（准备就绪，如何做，它是如何工作的，还有更多）。

为了给出如何完成食谱的明确指示，我们使用以下章节：

## 准备就绪

本节告诉你食谱中可以期待的内容，并描述如何设置任何软件或任何预先设置，这些是食谱所必需的。

## 如何做…

本节包含遵循食谱所需的步骤。

## 它是如何工作的…

本节通常包含对上一节中发生的事情的详细解释。

## 还有更多…

本节包含有关食谱的额外信息，旨在使读者对食谱有更深入的了解。

# 约定

在本书中，你会发现许多文本样式，用于区分不同类型的信息。以下是这些样式的一些示例及其含义的解释。

文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄如下所示：“为了本食谱的目的，假设所有下载将存储在 Windows 上的个人`C:\Users\<username>\Downloads`文件夹中，或者如果使用 OS X 系统，则存储在`/Users/<username>/Downloads`文件夹中。”

代码块的设置如下：

```
<?xml version="1.0" encoding="utf-8"?>
<service>
  <description>enable FTPS ports</description>
  <port protocol="tcp" port="40000-40100"/>
  <port protocol="tcp" port="21"/>
  <module name="nf_conntrack_ftp"/>
</service>
```

任何命令行输入或输出如下所示：

```
sudo diskutil unmountDisk /dev/disk3
sudo dd if=./CentOS-7-x86_64-Minimal-XXXX.iso of=/dev/disk3 bs=1M

```

**新术语**和**重要词汇**以粗体显示。您在屏幕上看到的单词，例如在菜单或对话框中，如下所示：“单击**下一步**按钮将您移动到下一个屏幕。”

### 注意

警告或重要注意事项以这样的框显示。

### 提示

提示和技巧如下所示。

# 读者反馈

我们始终欢迎读者的反馈。请告诉我们您对这本书的看法——您喜欢或不喜欢的地方。读者反馈对我们很重要，因为它帮助我们开发您将真正从中受益的标题。

要向我们发送一般反馈，只需发送电子邮件至`<feedback@packtpub.com>`，并在您的消息主题中提及书的标题。

如果您在某个主题上具有专业知识，并且有兴趣撰写或为书籍做出贡献，请参阅我们的作者指南，网址为[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

既然您是 Packt 书籍的自豪拥有者，我们有一系列的事情可以帮助您从购买中获得最大收益。

## 勘误

尽管我们已经尽一切努力确保我们内容的准确性，但错误仍然会发生。如果您在我们的书中发现错误——可能是文本或代码中的错误——如果您能向我们报告，我们将不胜感激。通过这样做，您可以节省其他读者的烦恼，并帮助我们改进这本书的后续版本。如果您发现任何勘误，请通过访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)来报告它们，选择您的书，点击**勘误提交表单**链接，并输入您的勘误细节。一旦您的勘误经过验证，您的提交将被接受，勘误将被上传到我们的网站或添加到该标题的勘误部分下的任何现有勘误列表中。

要查看以前提交的勘误，请访问[`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support)并在搜索字段中输入书名。所需信息将出现在**勘误**部分下。

## 盗版

互联网上版权材料的盗版是所有媒体持续存在的问题。在 Packt，我们非常认真地保护我们的版权和许可。如果您在互联网上遇到任何形式的我们作品的非法副本，请立即向我们提供位置地址或网站名称，以便我们可以采取补救措施。

请通过 `<copyright@packtpub.com>` 联系我们，并提供涉嫌盗版材料的链接。

我们感谢您在保护我们的作者和为我们带来有价值内容的能力方面提供的帮助。

## 问题

如果您在本书的任何方面遇到问题，可以通过 `<questions@packtpub.com>` 联系我们，我们将尽力解决问题。
