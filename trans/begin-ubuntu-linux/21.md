## 21

## 了解 Linux 用户和文件权限

大多数现代操作系统都使用用户账户来授权用户访问系统，Ubuntu 也不例外。您可能没有注意到这一点，如果在安装过程中或在您对系统进行个性化设置时，您选择了允许自动登录的选项，那么当您启动电脑时，您将被直接带到您的桌面，从而掩盖了用户实际登录系统的事实。

所以，不管你有没有意识到，你在 Ubuntu 里面总是有一个用户账号。您的用户帐户将有一组已定义的属性，以区别于其他用户帐户:例如，名称和个人文件夹。但是它也是一个群体的成员。成为某些组的成员可以访问系统中隐藏的部分，因为组可以允许访问和操作硬盘上的文件。而且，由于 Ubuntu 中的所有配置都存储在文件中(见[第 10 章](10.html#ch10))，这些权限将允许它改变系统本身。

### 了解用户和组帐户

我们已经说过，要与 Ubuntu 交互，你需要一个用户帐户。然而，故事远不止于此。例如，在某些情况下，您可能需要多个用户帐户。无论是在办公室还是在家里，使用计算机的人可能不止一个，您肯定希望将您的个人配置和数据与他们的分开。这时就需要额外的用户帐户了。本节将解释什么是用户帐户，如何创建它，以及如何使用组。

#### 用户和组

每个想登录 Ubuntu 的人都必须有一个用户账号。这将定义用户在系统上能做什么和不能做什么，具体参考文件和文件夹。因为 Ubuntu 实际上是一个大文件系统(甚至硬件设备也是文件；见[第十章](10.html#ch10)，用户权限是控制整个系统的核心。他们可以限制哪个用户可以访问哪个硬件和软件，从而控制对各种 PC 功能的访问。

每个用户也属于一个组。组具有与单个用户相同的权限类型。根据用户的组成员身份，可以拒绝或授予用户对文件或文件夹的访问权限。

![images](images/square.jpg) **注**和现实生活中一样，一个群体可以有很多成员，可以围绕各种利益为基础。在商业环境中，这可能意味着为会计部门和人力资源部门的成员创建组。通过更改组成员创建的文件的权限，每个组都可以拥有只有该组成员才能访问的文件(尽管像往常一样，任何具有超级用户权限的人都可以访问所有文件)。

在只有少数用户的默认 Ubuntu 系统上，组的概念可能显得有些多余。然而，组的概念是 Ubuntu 工作方式的基础，不可避免。即使你不使用群组，Ubuntu 仍然要求你的用户帐户是群组的一部分。

除了实际的人类用户，Ubuntu 系统有自己的一套用户和组帐户。访问硬件资源或特定文件集的各种程序是这些组的一部分。以这种方式设置系统用户和组使系统更加安全，也更易于管理。

#### 根用户

在大多数 Linux 系统上，root 用户可以控制整个系统。Root 可以检查任何文件并配置任何硬件。根通常属于自己的唯一组，也称为`root`。

Ubuntu 与大多数 Linux 发行版的不同之处在于，默认情况下不使用 root 帐户。相反，某些用户(包括在安装过程中设置的用户)只需输入登录密码，就可以“借用”root 用户或超级用户的权限。这可以通过在命令行提示符下在命令前加上`sudo`或`gksu`来实现，或者在使用影响系统设置的 GUI 程序时根据需要来实现。对于一些程序，你需要点击解锁按钮来获得超级用户的权力。如果愿意，您可以在系统上激活 root 用户帐户进行管理。要激活 root 帐户，请在终端窗口中使用以下命令(参见[附录 A](27.html#appa) 了解在终端窗口中发布命令的详细信息):

`Sudo  passwd root`

键入您自己的登录密码后，您将被邀请为 root 用户定义一个密码。因为它的力量，root 用户可以造成很多意外的破坏，所以默认情况下 Ubuntu 会阻止你以 root 身份登录。相反，您可以使用“关机”菜单中的“切换自”选项，从普通用户帐户临时切换为根用户。这将使您的会话保持打开状态，同时允许您以任何用户(例如 root)身份打开其他会话。

系统会提示您输入 root 密码，然后根据您的需要给予您 root 权限。完成后，注销并返回到普通用户帐户。

![images](images/square.jpg) **提示**当你以 root 用户身份登录时，你可以分辨出来，因为在我的菜单中，你的名字是“root”这应该被看作是一个警告，您现在可以不受限制地控制系统了，所以请注意您输入的内容，并在按 Enter 之前仔细检查所有内容！

如果你以安全的名义启用 root 密码，那么禁用`sudo`可能是一个明智的预防措施，这样可以防止非管理员用户玩他们不应该玩的东西。为此，您需要编辑文件`/etc/sudoers`。将会出现一行文字(如图[图 21-1](#fig_21_1) 所示),内容如下:

`%admin ALL=(ALL) ALL`

用`#`符号将其注释掉并保存文件(参见[图 21-1](#fig_21_1) )。当然，这都需要使用 root 权限来完成，所以使用 Run a command 对话框(可通过按 Alt+F2 打开)中的`gksudo gedit`来启动文本编辑器，然后导航并打开文件。在这样做之前，还要确保您已经设置了 root 密码，如前所示。

![images](images/2101.jpg)

***图 21-1。**编辑这些文件时要非常小心。*

#### 用户和文件权限

对于 Ubuntu 来说，用户和权限的概念就像一个集中的、无所不包的文件系统一样重要。事实上，这两者是隐性联系的。

最初安装 Linux 时，您应该已经创建了至少一个用户帐户。到目前为止，这已经形成了您用来访问 Linux 和运行程序的日常登录。

虽然你可能没有意识到，作为一个用户，你也属于一个组。事实上，系统上的每个用户都属于一个组。在 Ubuntu 下，普通用户根据用户名属于一个组(在其他版本的 Linux 下，你可能会发现你属于一个叫`users`的组)。

![images](images/square.jpg) **注意**组是 Ubuntu 的 UNIX 起源的又一个提醒。UNIX 通常用于拥有成百上千用户的大型计算机系统。将每个用户放入一个组中会使系统管理员的工作容易得多。在控制系统资源时，管理员可以控制用户组，而不是数百个单独的用户。在大多数家庭用户电脑上，组的概念有点多余，因为通常只有一个用户，或者最多两三个。然而，组的概念是 Linux 处理文件的核心。

Ubuntu 下的标准用户帐户通常在它能做的事情上是有限的。作为一个标准用户，你可以把文件保存到你自己的私有磁盘区域，这个区域位于`/home`目录，但是通常不在其他地方。您可以在文件系统中移动，但是有些目录是严格禁止的。同样，有些文件是只读的，因此您不能保存对它们的更改。所有这些都是使用文件权限强制执行的。

每个文件和目录都归用户所有。此外，文件和目录有三个独立的设置，指示 Linux 系统中谁可以读取它们，谁可以写入它们，以及，如果有问题的文件是*可运行的*(通常是程序或脚本)，谁可以运行(执行)它们。对于目录，还可以设置谁可以浏览它们，以及谁可以向它们写入文件。如果你试图访问一个你没有权限的文件或目录，你会被一个“拒绝访问”的错误信息拒绝。

#### 根 vs .须藤

大多数版本的 Linux 有两种类型的用户帐户:标准用户和根用户。标准用户是指那些可以在系统上运行程序，但他们的能力有限的用户。根用户拥有系统的完全运行权，因此通常被称为*超级用户*。根用户可以访问和/或删除任何想要的文件。它可以配置硬件、更改设置等等。

大多数版本的 Linux 都会创建一个名为`root`的用户帐户，并让用户以`root`的身份登录来执行系统维护。然而，出于实际和安全的原因，大多数时候用户应该以标准用户的身份登录。

Ubuntu 的不同之处在于它不允许以 root 用户的身份登录。相反，它允许某些用户(包括在安装过程中创建的用户)临时使用类似 root 的权限。在配置硬件时，您可能已经遇到过这种情况。如您所见，您所需要做的就是在系统提示时输入密码来管理系统。

这种工作方式被称为 *sudo* ，是*超级用户 do* 的简称。如果您是 sudoer(即，在特定情况下允许作为 root 的标准用户)，大多数需要 root 权限的应用程序都会要求您输入密码。其他应用程序可能不要求您拥有 root 权限，但您可能希望不时以 root 身份打开它们。Nautilus 和 gedit 就是一个很好的例子——也许你想完全删除一个已删除用户的个人文件夹，而作为一个标准用户你不能这样做。为此，您可以使用 Gksudo，它是`sudo`命令的图形化前端(它将允许您在 shell 提示符下使用 root 权限——只需在任何命令前加上`sudo`,并在提示时键入您的密码，以便使用 root 权限运行它)。如果您打开运行命令对话框(按 Alt+F2)并键入 **gksudo Nautilus** ，您将能够以 root 用户身份浏览文件系统。或者，如果你想编辑一个只有根用户有写权限的文件，运行`gksudo gedit`。Ubuntu 还会记得你最后一次使用`sudo`的时间，所以它不会在第一次使用后的 15 分钟内再次要求你输入密码，从而让你烦恼。

从某些方面来说，sudo 系统可以说比使用标准的根账户稍微不那么安全。但也简单了很多。它也减少了严重错误的机会。任何可能造成损害的命令或调整都不可避免地需要管理权限，因此需要您键入密码或在命令前加上`gksudo`或`sudo`。这是一个警告，可以防止错误。

#### uid 和 GID

尽管我们谈到了用户名和组名，但这些只是为了人类的利益而提供的。在内部，Ubuntu 使用一个数字系统来识别用户和组。它们分别被称为用户 id(uid)和组 id(GID)。

在 Ubuntu 下，所有低于 1000 的 GID 和 UID 号都是为系统保留的。这意味着在安装过程中创建的第一个非 root 用户帐户可能会被赋予一个 UID`1000`。此外，安装后创建的任何新组都从 1，000 开始编号。您添加的第一个用户的 UID 为`1000`，GID 为`1000`，第二个用户的 UID 为`1001`，依此类推。

![images](images/square.jpg) **注意** UID 和 GID 信息在日常使用中并不重要，大多数用于管理用户、组和文件权限的命令都理解人类可读的名称。然而，当您进行更复杂的系统管理时，了解 uid 和 GID 会很有用，比如为孩子设置受限系统或编写脚本。

#### 添加和删除用户和组

添加新用户或组的最简单快捷的方法是使用系统管理菜单下的用户和组工具。当然，您也可以通过命令行执行这些任务。

##### 添加和删除用户

要添加新用户，请从应用程序菜单中选择“用户和组”命令。接下来，单击添加。在“鉴定”窗口中，提供您的密码，然后点按“鉴定”。你会看到创建新用户对话框，如图[图 21-2](#fig_21_2) 所示。

![images](images/2102.jpg)

***图 21-2。**通过用户和用户组计划，添加新用户和用户组非常简单。*

按如下方式完成帐户创建向导:

> *创建一个新用户*:在初始安装时(见[第五章](05.html#ch5)，你需要输入用户名和真实姓名。用户名是系统识别用户的方式，而真实姓名是其他用户识别用户的方式。默认情况下，它们设置为相同。完成后按确定。
> 
> *更改用户密码:*您可以手动设置用户密码，也可以让系统为您生成一个随机密码。无论是哪种情况，都要确保记住密码，以便将其提供给将使用该用户帐户的人。您还可以选择允许用户登录其会话而无需输入密码的选项。完成后按确定。

创建用户后，您可以通过从列表中选择用户并单击“用户设置”窗口左侧的各种选项来设置附加设置。默认情况下，用户帐户是禁用的，因此在使用它之前，您应该点按“启用帐户”按钮。

> *账户类型:*您可以选择您希望用户拥有的配置文件:管理员、桌面用户或自定义。拥有管理员配置文件的用户可以使用`sudo`或`gksu`来管理系统。虽然桌面用户不能使用这些命令，但他们可以访问大多数其他系统资源。对于大多数用户来说，桌面用户配置文件是一个不错的选择。您不能为用户帐户选择自定义配置文件，但是如果您手动更改其权限(稍后将详细介绍)，此配置文件将被自动选择。
> 
> *密码*:需要用户的初始密码，但是你可以随时使用用户和组工具修改它(只要你有所需的权限)。您可以在文本框中输入密码(并在下面确认)，或者让系统从字母和数字中生成一个随机密码，但这可能会让用户更难记住。

如果您单击“高级设置”按钮，将有更多选项可用，如下所示:

> *联系信息*:您可以在此输入用户的联系信息。这不是必须的。
> 
> *用户权限*:该选项卡上的设置对用户在系统上能做什么和不能做什么提供了更多的控制。在这里，您可以阻止用户使用某些硬件，如图形卡的 3D 功能或调制解调器。您还可以控制用户是否能够管理系统。只需在相关的方框旁边打勾。
> 
> *高级*:在这里你可以改变额外的设置，如果你愿意的话，与系统上账户的技术设置有关。如果您不确定这些参数，最好保留默认设置。您可以从这里禁用该帐户，它将不再可用于登录。您可能还想更改用户的主组。默认情况下，用户将属于基于用户自己的用户名新创建的组。例如，如果您添加用户`john`，他将被添加到组`john`。这种私有组方法在个人文件访问方面实施了更严格的策略。或者，您可以创建一个组，并将几个用户分配到该组以实现文件共享。我们将在下一节讨论添加和删除组。

![images](images/square.jpg) **注意**主组下拉列表中列出了许多组。几乎所有这些都与 Linux 操作系统的工作方式有关，可以忽略不计(你可以在[表 21-1](#tab_21_1) 中看到组列表)。您不应该删除这些组中的任何一个或向其中添加新用户。这可能使系统不稳定和/或不安全。

删除用户只需在主用户和组窗口中突出显示列表中的用户名，然后单击删除按钮。请注意，您可以选择删除用户的个人文件夹或保留文件。您可能想要自己访问这些文件，并在完全移除个人文件夹之前对它们进行备份。

##### 创建和删除组

添加组只需在“用户和组”程序窗口中单击“管理组”按钮。点按“添加”按钮后，系统会提示您为群组命名。GID 将自动为您填写，但是如果您有充分的理由，您可以选择不同的号码。(记得使用 1000 以上的数字，以符合 Ubuntu 的操作方式。)

您不必立即将用户添加到组中，但是对话框底部会提供一个用户列表。勾选任何用户，授予该用户访问您的群组的权限。

![images](images/square.jpg) **注意**请记住，用户可以是多个组的成员，尽管所有用户都有一个他们所属的主组，GID 从该主组分配给他们创建的文件。

与用户帐户一样，删除组只需在列表中将其高亮显示，然后单击删除按钮。在这样做之前，你应该确保该组不再有任何成员，因为 Ubuntu 不会阻止你删除有成员的组(尽管它会警告你这是一件不好的事情)。

![images](images/square.jpg) **注意** Ubuntu 似乎可以提供保护，防止删除系统中的主要用户组所造成的破坏。当我们删除一个不同用户的主组条目，然后以该用户身份登录时，该组会自动重新创建！但是，您不应该依赖这种保护，并且应该在删除组之前进行检查。

正如您可能已经猜到的，要在 Ubuntu 下手动添加用户，您不仅必须创建一个组，然后将用户添加到其中，还必须将该用户添加到所需的补充组选择中。一些组被认为是有效使用计算机的强制组，如`plugdev`，而其他组是可选的，取决于你想给新用户多少自由(见[表 21-1](#tab_21_1) )。

![images](images/t2101.jpg)

#### 添加和更改密码

在默认的 Ubuntu 安装中，普通用户可以使用用户和组工具来更改自己的密码。从列表中选择您的用户帐户，然后点按密码栏旁边的更改按钮。系统将提示您更改用户密码窗口，如图[图 21-3](#fig_21_3) 所示，您必须输入当前密码并选择新密码，选项与您最初创建账户时相同。

![images](images/2103.jpg)

***图 21-3。**修改用户密码窗口*

您需要 root 权限来更改其他用户的密码，但是过程是相同的。出于明显的安全原因，Ubuntu 不允许空白密码。(它可能允许您设置一个空白密码，但之后它不会让该用户登录—这是一种禁用用户帐户的有趣方式)。

您可以输入任何内容作为密码，但是您应该记住一些常识性的规则。理想情况下，密码长度至少应为八个字符，包含字母、数字甚至标点符号。您可能还希望包含大写和小写字母，因为这使得密码更难猜测。

![images](images/square.jpg) **提示**您可以使用关机菜单上的切换选项临时切换到任何用户帐户。这样，您的会话将保持开放。另一方面，如果您注销，会话将被关闭，您需要保存打开的文档以备将来使用。

### 了解文件和文件夹权限

用户和组存在的一个主要原因是为不同的人管理不同的权限。磁盘上的每个文件和文件夹都有与之关联的权限，以及拥有它的用户和群组。没有权限，用户不能对文件做任何事情。

#### 查看权限

在 Nautilus 中，很容易看到拥有文件或文件夹的用户和组以及与之相关的权限。只需选择列表视图；然后从菜单中选择查看可见列选项，并选中所有者、组和权限框。下面是我们的测试 PC 中的一行文件列表示例:

![images](images/U2101.jpg)

“权限”列中是文件或文件夹的权限。权限列表通常由字符`r`(读)、`w`(写)、`x`(执行)和/或`—`(表示不适用)组成。

Owner 列列出了文件的所有者(在本例中为`linda`)和有权访问该文件的组(在本例中为`linda`)。

清单中的文件权限部分可能看起来令人困惑，但实际上非常简单。为了理解发生了什么，你需要把它分成四组，如图[图 21-4](#fig_21_4) 所示。

![images](images/2104.jpg)

***图 21-4。**文件列表的文件许可部分可以分解成四个独立的部分。*

这四组如下:

> *文件类型:*该字符代表文件类型。标准数据文件用连字符(`-`)表示。您系统上的大多数文件都属于这一类。一个`d`显示条目不是一个文件，而是一个目录。[表 21-2](#tab_21_2) 列出了文件类型代码。
> 
> *用户权限:*接下来是文件所有者的权限。这三个字符表示拥有该文件的人可以对它做什么。文件的所有者通常是创建它的用户，尽管所有者可以在以后更改。在本例中，显示了`rw-`。这意味着文件的所有者可以读取(`r`)和写入(`w`)该文件。换句话说，她可以查看并保存对它的更改。但是在`rw`后面有一个连字符，表示用户不能执行该文件。如果这是可能的，在这个地方将会有一个`x`。
> 
> *组权限*:在所有者权限之后是该文件被分配到的指定组的权限。这由另外三个与用户权限相同样式的字符表示。在本例中，组的权限是`r--`，这意味着指定组的成员可以读取文件，但没有权限写入文件，因为在通常出现`w`的地方有一个连字符。换句话说，就他们而言，这个文件是只读的。
> 
> *其他所有人的权限*:最后一组权限表示系统上其他所有人的权限(其他组中的其他用户)。在示例中，他们只能读取文件(`r`)；后面的两个连字符表示其他人不能写入或执行该文件。

![images](images/t2102.jpg)

与 Windows 一样，程序作为文件存储在硬盘上，就像标准数据文件一样。在 Linux 上，程序文件需要明确地标记为可执行的。这在许可列表中由`x`表示。因此，如果一个文件的权限中没有`x`，那么这个文件很可能不是一个程序或脚本(尽管由于各种技术原因，情况并不总是如此)。

更令人困惑的是，如果文件列表中的条目是一个目录(用`d`表示)，那么规则就不同了。在这种情况下，`x`表示用户可以访问该目录。如果没有`x`，用户浏览该目录的尝试将会遇到“拒绝访问”的消息。

文件权限可能很难理解，所以我们来看几个真实的例子。这些例子假设您作为用户`ubuntu`登录到 Linux。

#### 典型数据文件权限

下面是第一个例子:

![images](images/U2102.jpg)

您知道该文件由用户`linda`所有，因为该用户名出现在 Owner 列中。还要注意，组`linda`可以访问该文件，尽管具体的访问权限取决于权限。

从左到右，初始文件权限字符是连字符，表示这是一个普通文件，没有特殊特征。它也不是一个目录。

之后就是第一部分权限，`rw-`。这些是文件所有者`linda`的权限。您以该用户身份登录，因此该文件属于您，并且这些权限适用于您。您可以读写该文件，但不能执行它。因为您不能执行该文件，所以您可以推断这是一个数据文件，而不是一个程序(这个规则有一些例外，但是为了简单起见，我们将忽略它们)。

接下来是文件权限的下一部分，`rw-`。这告诉您组`linda`的成员可以对文件做什么。如果你是你的电脑的唯一用户，这是相当无用的信息，但是为了记录，它告诉你属于组`Ubuntu`的任何其他人也能读和写文件，但是不能执行它。如果您不是电脑的唯一用户，群组权限可能很重要。“更改权限”一节将介绍如何更改文件权限来控制谁可以访问文件。

最后，最后三个字符告诉您系统上其他每个人的权限。三个连字符(`---`)表示他们对该文件没有任何权限。在`r`通常出现的地方有一个连字符，所以他们甚至读不出来。之后的连字符告诉你他们不能写入文件或执行它。如果他们试图对该文件做任何事情，他们将得到一个“权限被拒绝”的错误。

#### 用户目录的权限

这是另一个例子:

![images](images/U2103.jpg)

权限列表以`d`开始，它告诉你这不是一个文件而是一个目录。之后是目录所有者的权限列表(`linda`)，他可以读取目录中的文件，也可以在那里创建新文件。`x`表示你可以访问这个目录，而不是被拒绝访问。如果用户可以读写目录，您可能会认为能够访问目录是理所当然的，但事实并非如此。

接下来是组成员的权限。他们可以读取目录中的文件，但不能在那里写入任何新文件(尽管他们可以修改已经在那里的文件，前提是单个文件的权限允许这样做)。同样，在特定权限列表的末尾有一个`x`,这表示组成员可以访问该目录。

遵循组权限的是其他所有人的权限。他们可以读取和浏览目录，但不能向其中写入新文件，就像组用户的权限一样。

#### 对 Root 拥有的目录的权限

这是最后一个例子:

![images](images/U2104.jpg)

可以看到该文件归`root`所有。记住，在这个例子中，你以`linda`的身份登录，你的组是`linda`。

权限列表以一个`d`开始，因此您可以看出这实际上是一个目录。此后，您会看到目录的所有者`root`拥有读取、写入和访问该目录的权限。

接下来是该组的权限:三个连字符。换句话说，名为`root`的组的成员没有权限以任何方式访问这个目录。他们不能浏览它，在其中创建新文件，甚至不能访问它。

接下来是其余用户的权限。这包括你，因为你不是用户`root`，也不属于它的组。三个连字符表示您没有权限读取、写入或访问此目录。换句话说，它超出了您的权限，可能是因为它包含了只有根用户才能访问的文件！

#### 更改权限

您可以在 Nautilus 中轻松更改文件和目录的权限。您必须是文件的所有者才能更改其权限(当然，您也可以是 root 用户；记得在运行应用程序对话框中使用 Gksudo，以 root 权限打开 Nautilus)。只需右键单击文件并选择属性。

[图 21-5](#fig_21_5) 显示了一个文件的权限选项卡。您可以为所有者、组或其他所有人设置权限。可用的权限有无(无访问权限)、只读和读写。当您选择权限时，会自动应用这些权限；如果您保持 Nautilus 窗口打开并在文件属性窗口后面可见，您会看到这一点，因为权限几乎会立即更新。

![images](images/2105.jpg)

***图 21-5。**文件权限选项卡*

您可以通过选中“允许将文件作为程序执行”复选框来启用执行权限。它适用于所有者、组和其他用户。

文件夹的权限稍微复杂一些，如图[图 21-6](#fig_21_6) 所示。

![images](images/2106.jpg)

***图 21-6。**文件夹权限选项卡也允许您更改其文件的权限。*

您可以通过在“组”下拉列表中选择所需的组来更改文件夹的组。

在任何特定的文件夹中，您可以为所有者、组和其他所有人设置三种级别的文件夹访问权限:仅列出文件(真正允许对文件夹进行读取访问)、访问文件(允许读取和执行访问)以及创建和删除文件(允许读取、写入和执行访问)。您还可以通过在每个“文件访问”对话框中选择适当的级别来更改应用于文件夹中包含的文件的权限:只读或读写。选中“允许将文件作为程序执行”框，设置包含文件的执行权限。单击“对附件应用权限”按钮，将更改向下传播到层次结构中。

要改变一个文件或文件夹的所有权，你需要有 root 权限，所以一定要用 Gksudo 打开 Nautilus。在所有者字段中，选择用户。

![images](images/square.jpg) **提示**目录权限比较奇怪，很容易设置混乱甚至不合逻辑的权限。一般来说，你应该遵循的日常规则很简单。如果您希望阻止特定用户访问目录，请移除所有权限—读取、写入和执行(`rwx`)。如果您希望将目录设为只读，请保留读取和执行权限，但删除写入权限(`r-x`)。甚至可以通过保留写和执行权限并删除读权限来使目录只写(`-wx`)。然而，你很少会想这么做。

**数字文件权限**

在本章中，我们专门讨论了文件权限的缩写:`r`表示读，`w`表示写，`x`表示执行。这就是所谓的*符号符号*，它的目标是使文件权限直观且易于用户理解。然而，UNIX 和 Linux 文件权限传统上表示为*八进制符号*。文件权限用 0 到 7 之间的三个数字表示，每个数字代表用户、组以及文件或目录的其他分配的读、写和执行权限。

例如，一个权限列表为`-rwxr-xr--`的文件可以用八进制表示法表示为`754`，一个文件权限为`-rwxrwxrwx`的文件可以表示为`777`。

这听起来比实际更复杂。知道读权限的值是`4`，写权限的值是`2`，执行权限的值是`1`就够了。权限可以“加在一起”成为一个更大的数字:读写权限的值为`6`，例如(`4` + `2`)。“完全”文件权限设置(`rwx`)的值为`7` ( `4` + `2` + `1`)。

事实上，八进制表示法可以由四个数字组成，因为——与符号表示法一样——总共可以设置四个权限组:读、写和执行，以及特殊的文件权限，如 sticky bit、SetUserID 和 SetGroupID。然而，在大多数情况下，八进制表示法文件权限用三位数表示。

应该记住，对于大多数任务，没有必要使用八进制符号。象征性的符号通常就足够了，并且有不太可能诱发偏头痛的额外好处。然而，当改变一些系统设置时(例如，`umask`变量控制新创建文件的权限)，通常需要指定一个八进制值。另外，一些 Linux 和 UNIX 技术文档更喜欢指定八进制记数法，而不是更现代的符号记数法。

![images](images/square.jpg) **提示**在鹦鹉螺中添加列可以查看八进制记数法。选择查看可见列，并选中八进制权限旁边的框。

**创建文件快捷键**

当我们讨论在 GNOME 桌面上创建启动器时，我们在第 9 章中提到了文件系统快捷方式的概念。启动器的问题是它们只能在 GNOME 中被识别。换句话说，当你使用命令提示符(或者几乎任何其他加载/保存文件的程序，除了一些专门为 GNOME 桌面环境创建的程序)时，它们没有任何意义。

Ubuntu 文件系统提供了两种真正的快捷方式，称为*文件链接*。它们是*符号链接*和*硬链接*。

符号链接是最常用的。符号链接类似于 Windows 快捷方式，因为它创建了一个“指向”另一个文件的小文件。然而，与 Windows 快捷方式不同的是，符号链接并不是一个真实的文件——它存在于文件系统级别，因此不能在文本编辑器中查看。

您可以在 Nautilus 的文件列表中找到一个符号链接，因为它有一个指向右上方的小箭头，如果您在列表视图中，Type 列指示它是一个文件链接。如果您右键单击链接并打开其属性窗口，您可以在基本选项卡上看到字段链接目标，以找出哪个是原始文件。

硬链接更复杂，需要对文件的工作原理有所了解。简单地说，所有文件都由一个指针和实际数据组成。如你所料，指针告诉文件系统在磁盘上的什么地方可以找到数据。创建硬链接实际上创建了一个指向数据的附加指针，该指针与原始指针具有完全相同的属性，只是名称不同。对链接文件执行任何操作都会对原始文件执行该操作。此外，没有明显的迹象表明硬链接不是一个真正的文件，除了这样一个事实，即*链接计数*——文件的一个属性——将大于 1。这表明不止一个文件*将*链接到数据。也许现在你能明白为什么人们更喜欢使用更容易察觉的符号链接了！

要创建符号链接，只需右键单击文件并选择“创建链接”选项。您可以随意移动链接；它仍然会指向正确的文件。

新链接具有奇数文件权限。它声称对每个人都有读/写/执行权限(`rwxrwxrwx`)，但实际上，因为它是一个链接，所以它反映了它所链接的文件的权限。因此，如果您试图访问链接到您无权访问的文件的快捷方式，您将会看到相应的错误信息。

### 总结

在这一章中，你已经了解了 Ubuntu 体验的两个重要元素，很大程度上来源于它的 UNIX 和 Linux 前辈:用户和权限。这些重要的概念为 Ubuntu 中实现的安全性奠定了基础。通过用户，人们可以拥有自己的体验、配置、数据和权限。一个重要的特点是，每个用户帐户都可以拥有自己的文件，并对它们设置权限。简而言之，用户可以更改的文件决定了该用户可以对系统做什么。

我们讨论了超级用户和标准用户之间的区别，以及如何允许临时访问超级用户的权限。我们向您展示了创建用户和组帐户的步骤，并研究了有时令人费解的文件和文件夹权限符号。一旦你掌握了基础知识，你就应该准备好自己设置权限了。